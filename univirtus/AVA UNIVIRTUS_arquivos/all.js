!function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(e,t){var i,b=this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o};function i(e){if(!e)return i.__;Array.prototype.reduce||(Array.prototype.reduce=function(e,t){for(var n=t,o=0;o<this.length;o++)n=e(n,this[o],o,this);return n});var r="";return("."+e).split(".").reduce(function(e,t,n,o){r?r+="."+t:r=t;t=e["__"+r];return void 0===t&&(i.Logger.prototype=e,t=new i.Logger(r),e["__"+r]=t),t},i.__)}!function(r){function t(e,t,n){void 0!==t[e]&&(null!==t[e]?n[e]=t[e]:delete n[e])}function a(e){if((null==r.enabled||r.enabled)&&!(null!=r.maxMessages&&r.maxMessages<1)){try{if(e.userAgentRegex&&!new RegExp(e.userAgentRegex).test(navigator.userAgent))return}catch(e){}try{if(e.ipRegex&&r.clientIP&&!new RegExp(e.ipRegex).test(r.clientIP))return}catch(e){}return 1}}function c(e,t){try{if(e.disallow&&new RegExp(e.disallow).test(t))return}catch(e){}return 1}function l(e){return"function"==typeof e?e instanceof RegExp?e.toString():e():e}r.enabled,r.maxMessages,r.defaultAjaxUrl,r.clientIP,r.defaultBeforeSend,r.requestId="";var o=function(e,t,n){this.msg=e,this.meta=t,this.finalString=n};function u(e){var t,n=l(e);switch(typeof n){case"string":return new o(n,null,n);case"number":case"boolean":return t=n.toString(),new o(t,null,t);case"undefined":return new o("undefined",null,"undefined");case"object":return n instanceof RegExp||n instanceof String||n instanceof Number||n instanceof Boolean?(t=n.toString(),new o(t,null,t)):new o(null,n,JSON.stringify(n));default:return new o("unknown",null,"unknown")}}function e(){return 1e3}function n(){return 2e3}function i(){return 3e3}function s(){return 4e3}function d(){return 5e3}function p(){return 6e3}r.setOptions=function(e){return t("enabled",e,this),t("maxMessages",e,this),t("defaultAjaxUrl",e,this),t("clientIP",e,this),t("requestId",e,this),t("defaultBeforeSend",e,this),this},r.getAllLevel=function(){return-2147483648},r.getTraceLevel=e,r.getDebugLevel=n,r.getInfoLevel=i,r.getWarnLevel=s,r.getErrorLevel=d,r.getFatalLevel=p,r.getOffLevel=function(){return 2147483647};var f=function(e,t){this.inner=t,this.name="JL.Exception",this.message=u(e).finalString};(r.Exception=f).prototype=new Error;var g=function(e,t,n,o){this.l=e,this.m=t,this.n=n,this.t=o};function m(e,t){this.appenderName=e,this.sendLogItems=t,this.level=r.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.buffer=[],this.batchBuffer=[]}r.LogItem=g,m.prototype.setOptions=function(e){return t("level",e,this),t("ipRegex",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("sendWithBufferLevel",e,this),t("storeInBufferLevel",e,this),t("bufferSize",e,this),t("batchSize",e,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this},m.prototype.log=function(e,t,n,o,r,i,s){a(this)&&c(this,i)&&(r<this.storeInBufferLevel||(s=new g(r,i,s,(new Date).getTime()),r<this.level?0<this.bufferSize&&(this.buffer.push(s),this.buffer.length>this.bufferSize&&this.buffer.shift()):(r<this.sendWithBufferLevel||this.buffer.length&&(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.batchBuffer.push(s),this.batchBuffer.length>=this.batchSize&&this.sendBatch())))},m.prototype.sendBatch=function(){0!=this.batchBuffer.length&&(null!=r.maxMessages&&r.maxMessages<1||(null!=r.maxMessages&&(r.maxMessages-=this.batchBuffer.length),this.sendLogItems(this.batchBuffer),this.batchBuffer.length=0))},f=m,r.Appender=f;var h,v=(b(S,h=f),S.prototype.setOptions=function(e){return t("url",e,this),t("beforeSend",e,this),h.prototype.setOptions.call(this,e),this},S.prototype.sendLogItemsAjax=function(e){try{var t="/jsnlog.logger";null!=r.defaultAjaxUrl&&(t=r.defaultAjaxUrl),this.url&&(t=this.url);var n=JSON.stringify({r:r.requestId,lg:e}),t=this.getXhr(t);"function"==typeof this.beforeSend?this.beforeSend(t):"function"==typeof r.defaultBeforeSend&&r.defaultBeforeSend(t),t.send(n)}catch(e){}},S.prototype.getXhr=function(e){var t=new XMLHttpRequest;if("withCredentials"in t||"undefined"==typeof XDomainRequest)return t.open("POST",e),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("JSNLog-RequestId",r.requestId),t;t=new XDomainRequest;return t.open("POST",e),t},S);function S(e){h.call(this,e,S.prototype.sendLogItemsAjax)}r.AjaxAppender=v;var I,y=(b(w,I=f),w.prototype.clog=function(e){console.log(e)},w.prototype.cerror=function(e){console.error?console.error(e):this.clog(e)},w.prototype.cwarn=function(e){console.warn?console.warn(e):this.clog(e)},w.prototype.cinfo=function(e){console.info?console.info(e):this.clog(e)},w.prototype.cdebug=function(e){console.debug?console.debug(e):this.cinfo(e)},w.prototype.sendLogItemsConsole=function(e){try{if(!console)return;for(var t=0;t<e.length;++t){var n=e[t],o=n.n+": "+n.m;"undefined"==typeof window&&(o=new Date(n.t)+" | "+o),n.l<=r.getDebugLevel()?this.cdebug(o):n.l<=r.getInfoLevel()?this.cinfo(o):n.l<=r.getWarnLevel()?this.cwarn(o):this.cerror(o)}}catch(e){}},w);function w(e){I.call(this,e,w.prototype.sendLogItemsConsole)}function C(e){this.loggerName=e,this.seenRegexes=[]}r.ConsoleAppender=y,C.prototype.setOptions=function(e){return t("level",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("ipRegex",e,this),t("appenders",e,this),t("onceOnly",e,this),this.seenRegexes=[],this},C.prototype.buildExceptionObject=function(e){var t={};return e.stack?t.stack=e.stack:t.e=e,e.message&&(t.message=e.message),e.name&&(t.name=e.name),e.data&&(t.data=e.data),e.inner&&(t.inner=this.buildExceptionObject(e.inner)),t},C.prototype.log=function(e,t,n){var o,r,i,s=0;if(!this.appenders)return this;if(e>=this.level&&a(this)&&(n?(r=this.buildExceptionObject(n)).logData=l(t):r=t,c(this,(o=u(r)).finalString))){if(this.onceOnly)for(s=this.onceOnly.length-1;0<=s;){if(new RegExp(this.onceOnly[s]).test(o.finalString)){if(this.seenRegexes[s])return this;this.seenRegexes[s]=!0}s--}for(o.meta=o.meta||{},o.meta.loggerName=this.loggerName,s=this.appenders.length-1;0<=s;)this.appenders[s].log((i=e)<=1e3?"trace":i<=2e3?"debug":i<=3e3?"info":i<=4e3?"warn":i<=5e3?"error":"fatal",o.msg,o.meta,function(){},e,o.finalString,this.loggerName),s--}return this},C.prototype.trace=function(e){return this.log(1e3,e)},C.prototype.debug=function(e){return this.log(2e3,e)},C.prototype.info=function(e){return this.log(3e3,e)},C.prototype.warn=function(e){return this.log(4e3,e)},C.prototype.error=function(e){return this.log(5e3,e)},C.prototype.fatal=function(e){return this.log(6e3,e)},C.prototype.fatalException=function(e,t){return this.log(6e3,e,t)},f=C,r.Logger=f,r.createAjaxAppender=function(e){return new v(e)},r.createConsoleAppender=function(e){return new y(e)},f=new v(""),"undefined"==typeof window&&(f=new y("")),r.__=new r.Logger(""),r.__.setOptions({level:r.getDebugLevel(),appenders:[f]})}(i=i||{}),void 0!==t&&(t.JL=i),"function"==typeof __jsnlog_configure&&__jsnlog_configure(i)},function(e,t){var i;window.appConfig={},(i=appConfig).source={Mobile:"Mobile",Web:"Web"},i.pluginType={LightBox:{Name:"LightBox",Id:"6"},ConnectWithMail:{Name:"ConnectWithMail",Id:"10"},Connect:{Name:"Connect",Id:"3"},SocialShare:{Name:"SocialShare",Id:"7"},SocialBounce:{Name:"SocialBounce",Id:"8"},SocialBar:{Name:"SocialBar",Id:"9"},SocialBox:{Name:"SocialBox",Id:"2"},SocialPush:{Name:"SocialPush",Id:"11"},SocialBounceImage:{Name:"SocialBounceWithImage",Id:"12"},OnSite:{Name:"OnSite",Id:"13"},SocialBounceSurvey:{Name:"SocialBounceWithSurvey",Id:"20"},SocialBounceQuiz:{Name:"SocialBounceWithQuiz",Id:"21"},LightboxText:{Name:"LightboxText",Id:"22"},LightboxImage:{Name:"LightboxImage",Id:"23"},LightboxRedirectText:{Name:"LightboxRedirectText",Id:"25"},LightboxRedirectImage:{Name:"LightboxRedirectImage",Id:"26"}},i.Customer={SocialMiner:{Id:"064B7A45-4372-4155-A286-A06A97C7D626",Name:"SocialMiner",ProdAppId:"1443650659203895",DevAppId:"1474359889466305"}},i.GetFbApiVersion=function(){return"v2.12"},i.GetChannelUrl=function(){return"https://plugins.soclminer.com.br/v3/assets/channel.min.html"},i.GetGAPageName=function(e,t){return e+t},i.GetGAPageTitle=function(e,t){return e+" "+t},i.IsMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},i.IsApple=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},i.IsSupportPush=function(){return!/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},i.IsAndroid=function(){return/Android/i.test(navigator.userAgent)},i.IsChrome=function(){if(i.IsMobile())return!!window.chrome;var e=window.chrome,t=window.navigator,n=t.vendor,o=void 0!==window.opr,r=-1<t.userAgent.indexOf("Edge");return!!t.userAgent.match("CriOS")||null!=e&&"Google Inc."===n&&!1==o&&!1==r}},function(e,t){var n;window.soclCookie={},(n=soclCookie).createCookie=function(e,t,n,o){var r="";(n||o)&&((i=new Date).setTime(i.getTime()+(o||24*n*60*60*1e3)),r="; expires="+i.toGMTString());var i="";window.isSecureContext&&(i="secure"),document.cookie=e+"="+t+r+"; path=/;SameSite=None;"+i},n.removeCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},n.createCookieOnSite=function(e,t,n){var o="";n&&((r=new Date).setTime(r.getTime()+n),o="; expires="+r.toGMTString());var r="";window.isSecureContext&&(r="secure"),document.cookie=e+"="+t+o+"; path=/;SameSite=None;"+r},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}},function(e,t){window.soclHelper={};!function(a){var s=5,n=2,o=2,c=2,r=1,l=1,u=1,d=2,p=2,f=2,g=1,m=3,h=7,v=1,S=2,I={KEY:"smeventssent_",INTERVAL:12e4},y="smeventsclear_",w={Presales_LastClick:"Presales.LastClick",Presales_AssistedSale:"Presales.AssistedSale",Presales_NoInteraction:"Presales.NoInteraction",Presales_Suppression:"Presales.Suppression",Presales_Error:"Presales.Error",Presales_NoInterference:"Presales.NoInterference"},C=1,b=!1,H=["smid","utm_","gclid","iprom","ipron"],E={apiKey:"AIzaSyDV2_rHShUBKzpWTQn5DoCGdxB40aFBwnI",authDomain:"push-messaging-for-chrome-1114.firebaseapp.com",databaseURL:"https://push-messaging-for-chrome-1114.firebaseio.com",projectId:"push-messaging-for-chrome-1114",storageBucket:"push-messaging-for-chrome-1114.appspot.com",messagingSenderId:"694635173055",appId:"1:694635173055:web:51613b33da784a5058a20a"};a.urlContainsSpecificParams=function(e){var o=null;return e.split("&").forEach(function(e){for(var t=e.split("="),n=0;n<H.length;n++)t[0].startsWith(H[n])&&((o=o||{})[t[0]]=t[1])}),o},a.getEnvironment=function(){return""},a.getEventsCookieInfo=function(){return I};var P="https://"+a.getEnvironment()+"plugins.soclminer.com.br/v3/assets/js/",O=1;function _(e,t){return e=soclHelper.replaceAll("-","",e),t=a.replaceAll("{0}",e,(t||"logs")+"_{0}"),soclTracking.getLocalDB(t)}a.PROXY_URI="https://"+a.getEnvironment()+"plugins.soclminer.com.br/v3/assets/proxy.min.html",a.replaceAll=function(e,t,n){return n.replace(new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"g"),t)},a.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a.formatDate=function(e){var t=new Date(e),n=""+(t.getMonth()+1),e=""+t.getDate();return[t.getFullYear(),n=n.length<2?"0"+n:n,e=e.length<2?"0"+e:e].join("-")},a.getNow=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"-"+(n=n<10?"0"+n:n)+"-"+(t=t<10?"0"+t:t)+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},a.contains=function(e,t){return-1!=e.indexOf(t)},a.getQueryStringParams=function(e,t){for(var n=(t||window.location.search.substring(1)).split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==e)return r[1]}},a.extractClientIdFromUrl=function(){var e=null;try{!(e=soclHelper.getQueryStringParams("clientId")||soclHelper.getQueryStringParams("clientId",window.location.search.substring(1)))&&window.opener&&(e=soclHelper.getQueryStringParams("clientId",window.opener.location.search.substring(1)))}catch(e){console.log("SM - [URSA] - extractClientIdFromUrl - Failed to extract clientId: ".concat(e))}return e},a.extractSessionHashFromUrl=function(){var e=null;try{!(e=soclHelper.getQueryStringParams("sessionHash")||soclHelper.getQueryStringParams("sessionHash",window.location.search.substring(1)))&&window.opener&&(e=soclHelper.getQueryStringParams("sessionHash",window.opener.location.search.substring(1)))}catch(e){console.log("SM - [URSA] - extractSessionHashFromUrl - Failed to extract sessionHash: ".concat(e))}return e},a.toGUID=function(e){var t="";return t=""!==e?(t=(t=(t=(t+=e.substring(0,8))+"-"+e.substring(8,12))+"-"+e.substring(12,16))+"-"+e.substring(16,20))+"-"+e.substring(20,32):t},a.hasClass=function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},a.updateAccessToken=function(n){n&&(soclCookie.getCookie("smextoken_"+n)||soclConnect.getStatus(function(e){e&&soclConnect.getFbCurrentAccessToken(function(e){e&&soclConnect.getId(n,function(t){t&&getCORS(apiUrl+"/fb/exchangeToken/"+n+"/"+e+"/?format=json",null,function(e){postCORS(apiUrl+"/users/profile/"+e.response.accessToken+"/?format=json",{customerId:n,userId:t},function(e){soclCookie.createCookie("smextoken_"+n,!0,7)})})})})}))},a.formatUrlBy=function(e,t,n,o){n&&n.length&&(n=[apiUrl+"/customers/"+e+"/formaturl?format=json&pluginType="+t].concat(n).join("&url="),getCORS(n,null,function(e){o(e)}))},a.formatUrlPipe=function(e){e=JSON.parse(e);return e.link=e.link.replace("|",encodeURI("|")),e.linkView=e.linkView.replace("|",encodeURI("|")),e=JSON.stringify(e)},a.findLocalItems=function(e){var t,n=[];for(t in localStorage)localStorage.hasOwnProperty(t)&&(t.match(e)||!e&&"string"==typeof t)&&(value=JSON.parse(localStorage.getItem(t)),n.push(t));return n},a.getCustomerInfo=function(r,i,s){a.getParamOnSession(function(e){var t=""!==document.referrer?encodeURIComponent(document.referrer):"";-1!==t.indexOf("minerlanding")&&(t="https://minerlanding.soclminer.com.br");var n=a.findLocalItems("onsiteview_"),o="";n.forEach(function(e){o+="&OnsiteViewed="+e}),getCORS(apiUrl+"/customers/"+r+"?format=json&url="+i+"&referrer="+t+"&paramOnSession="+e+"&isMobile="+a.isMobile()+o,null,function(e){s(e)})})},a.createSessionHash=function(e){return t(e+soclConnect.generateRndGuidV4()+(new Date).toISOString())},a.getSessionHash=function(){return a.getSessionStorageValue("session-guid")};var k=function(e){if(!(t=e)||!t.length||"{"!==t[0]&&"["!==t[0])return e;var t,e=JSON.parse(e);return e instanceof Array?e.map(function(e){return k(e)}):Object.entries(e).reduce(function(e,t){var n=t[0],o=t[1],t={};return t[n]=k(o),Object.assign({},e,t)},{})};a.getMetadata=function(){var e=window.sm__dataLayer||{};for(i in e)e[i]=e[i]instanceof Array?e[i].toString():e[i];return e},a.postBehaviors=function(e,t,n,o){function r(){x(e,t,o).forEach(function(e){e.userAgent=navigator.userAgent,postJsonCORS("https://wonka.socialminer.com/ursa/enterprise/behaviors",e)}),soclCookie.createCookie(s,"true",null,12e4)}var i,s="smbehaviorssent_"+a.replaceAll("-","",e);n?r():(i=!soclCookie.getCookie(s),soclHelper.getPurchaseUrl(function(e){var t,e=(e=e,t=document.location.href.replace(/^(http|https):\/\//i,""),e.some(function(e){return e=e.replace(/^(http|https):\/\//i,""),soclHelper.contains(t,e)}));(i||e)&&r()}))},a.getSMIDToIFrameSrc=function(e,t){if(t)return"&userId="+t;e=soclHelper.getStoreValue(soclConnect.createSMIdKey(e));return e?"&userId="+e:""},a.setCustomerInfoToLocalStorage=function(e){var t="smCustomerInfo_"+a.replaceAll("-","",e.id);return a.setLocalStorageValue(t,e)},a.getCustomerInfoFromLocalStorage=function(e){e="smCustomerInfo_"+a.replaceAll("-","",e);return a.getLocalStorageValue(e)},a.getSMPIdFromURI=function(){var e=new a.URLSearchParams(window.location.search);return!!(e.smpid&&0<e.smpid.length&&e.smid)&&e.smpid},a.getSMSmartIdFromURI=function(){var e=new a.URLSearchParams(window.location.search);return!!(e.smsmartid&&0<e.smsmartid.length)&&e.smsmartid},a.URLSearchParams=function(){return window.location.search.substr(1).split("&").reduce(function(e,t){var n=t.split("="),t=n[0],n=decodeURIComponent(n[1]||"");return"true"===n.trim().toLowerCase()||"false"===n?n=Boolean(n):isNaN(Number(n))||(n=Number(n)),e[t]=n,e},{})};var x=function(r,i,s){var e,t,n,a=new Date("2019-07-01 00:00:00"),o="items",c=[],l=_(r);return l.tableExists(o)&&(e={limit:10},(e=l.queryAll(o,e))&&e.length&&(t=e.slice(0,10).reduce(function(e,t){if(new Date(t.date)<a)return e;var n={customerId:r,clientId:t.clientId||i,personId:s,metadata:t.metadata||{},url:encodeURIComponent(t.url),referer:""!==t.referrer?encodeURIComponent(t.referrer):""};n.metadata=B(n.metadata);var o=t.sessionHash||"00000000-0000-0000-0000-000000000000",t=e[o]||[];return t.push(n),e[o]=t,e},{}),c=Object.keys(t).map(function(e){return{behaviors:t[e],sessionHash:e}}),n=0,l.deleteRows(o,function(e){return++n<=10}),l.commit())),c},B=function(e){return e?(delete e.price,delete e.notAvailable,e):{}};a.createEvent=function(r){soclHelper.getCID(function(e){var t,n,o;(0!==e||r.customerId)&&r&&r.type&&0<r.type.trim().length&&(n=a.getOrCreateSMObj(e||r.customerId),o=soclHelper.replaceAll("-","",e||r.customerId),t=a.getOrCreateSessionHash(),void 0===r.additionalData&&(r.additionalData={}),r.additionalData.Device=a.isMobile()?S:v,n={type:r.type,step:r.step,channelId:r.channelId,customerId:e||r.customerId,clientId:n.clientId,systemId:C,dateTime:a.getNow(),personId:r.personId||soclHelper.getStoreValue("smid_"+o),additionalData:encodeURI(JSON.stringify(r.additionalData||{}))},o="events_"+o,soclTracking.insertEventItem(o,{sessionHash:t,event:n}),socl.emmit.onEvent(n))})},a.shouldSendEvents=function(e){return!soclCookie.getCookie(I.KEY+e)},a.sendEvents=function(e,t){var n;(a.shouldSendEvents(e)||t)&&(t=A(e),n="https://"+a.getEnvironment()+"wonka.socialminer.com/ursa/enterprise/events",t.forEach(function(e){postJsonCORS(n,e)}),soclCookie.createCookie(I.KEY+e,"true",null,I.INTERVAL),soclCookie.createCookie(y+e,"true",60))};var A=function(e){var t,n,o=[],r="items",i=_(e,"events");return i.tableExists(r)&&(e={limit:5},(e=i.queryAll(r,e))&&e.length&&(t=e.slice(0,5).reduce(function(e,t){var n={type:t.event.type,step:t.event.step,channelId:t.event.channelId,customerId:t.event.customerId,clientId:t.event.clientId,systemId:t.event.systemId,dateTime:t.event.dateTime,personId:t.event.personId,additionalData:t.event.additionalData},o=t.sessionHash,t=e[o]||[];return t.push(n),e[o]=t,e},{}),o=Object.keys(t).map(function(e){return{events:t[e],sessionHash:e}}),n=0,i.deleteRows(r,function(e){return++n<=5}),i.commit())),o};a.getPluginSettingsByType=function(e,t,n,o){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json&pluginType="+n,null,function(e){o(e)})},a.getPluginSettings=function(e,t,n){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json",null,function(e){n(e)})};var t=function(e,t){function n(e,t){return e<<t|e>>>32-t}function o(e){for(var t="",n=7;0<=n;n--)t+=(e>>>4*n&15).toString(16);return t}for(var r,i,s,a,c,l,u,d,p,f=new Array(80),g=1732584193,m=4023233417,h=2562383102,v=271733878,S=3285377520,I=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t}(e)).length,y=[],w=0;w<I-3;w+=4)i=e.charCodeAt(w)<<24|e.charCodeAt(w+1)<<16|e.charCodeAt(w+2)<<8|e.charCodeAt(w+3),y.push(i);switch(I%4){case 0:w=2147483648;break;case 1:w=e.charCodeAt(I-1)<<24|8388608;break;case 2:w=e.charCodeAt(I-2)<<24|e.charCodeAt(I-1)<<16|32768;break;case 3:w=e.charCodeAt(I-3)<<24|e.charCodeAt(I-2)<<16|e.charCodeAt(I-1)<<8|128}for(y.push(w);y.length%16!=14;)y.push(0);for(y.push(I>>>29),y.push(I<<3&4294967295),r=0;r<y.length;r+=16){for(w=0;w<16;w++)f[w]=y[r+w];for(w=16;w<=79;w++)f[w]=n(f[w-3]^f[w-8]^f[w-14]^f[w-16],1);for(s=g,a=m,c=h,l=v,u=S,w=0;w<=19;w++)d=n(s,5)+(a&c|~a&l)+u+f[w]+1518500249&4294967295,u=l,l=c,c=n(a,30),a=s,s=d;for(w=20;w<=39;w++)d=n(s,5)+(a^c^l)+u+f[w]+1859775393&4294967295,u=l,l=c,c=n(a,30),a=s,s=d;for(w=40;w<=59;w++)d=n(s,5)+(a&c|a&l|c&l)+u+f[w]+2400959708&4294967295,u=l,l=c,c=n(a,30),a=s,s=d;for(w=60;w<=79;w++)d=n(s,5)+(a^c^l)+u+f[w]+3395469782&4294967295,u=l,l=c,c=n(a,30),a=s,s=d;g=g+s&4294967295,m=m+a&4294967295,h=h+c&4294967295,v=v+l&4294967295,S=S+u&4294967295}return d=o(g)+o(m)+o(h)+o(v)+o(S),t?(p=d.toLowerCase(),btoa(String.fromCharCode.apply(null,p.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))):d.toLowerCase()};function T(e){return"sm__"+e.replace(N,"")}a.getPluginSettingsDemo=function(e,t,n,o,r){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json&pluginType="+n+"&pluginIdentifier="+o,null,function(e){r(e)})},a.listCampaignsBy=function(e,t){var n=a.isMobile()?h:m,n=apiUrl+"/customers/"+e+"/campaign/?format=json&channelType="+n;getCORS(n,null,function(e){t(e)})},a.setSessionValue=function(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){}},a.setStoreValue=function(e,t){try{window.localStorage.setItem(e,t.replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"'))}catch(e){}},a.setCookie=function(e,t,n){try{soclCookie.createCookie(e,t,n)}catch(e){}},a.getSessionValue=function(e){var t=null;try{t=window.sessionStorage.getItem(e,t)}catch(e){}return t},a.categorizeLastClick=function(e,t){try{var n={};if(t=t||[],sortedImpactList=(e=e||[]).slice().reverse(),sortedViewList=t.slice().reverse(),n.additionalData={Impact:e,Views:t},impact=sortedImpactList.find(function(e){return e.smid}),impact)return 0==sortedImpactList.indexOf(impact)?n.type=w.Presales_LastClick:n.type=w.Presales_AssistedSale,n;if(sortedViewList.length){if(sortedViewList[0].kind&&"suppression"===sortedViewList[0].kind){var o=sortedViewList.find(function(e){return"suppression"==e.kind}),r=sortedViewList.find(function(e){return"view"==e.kind});if(!r)return n.type=w.Presales_Suppression,n;if(delta=new Date(o.create_date)-new Date(r.create_date),18e5<delta)return n.type=w.Presales_Suppression,n}return n.type=w.Presales_NoInteraction,n}return n.type=w.Presales_NoInterference,n}catch(e){return n.type=w.Presales_Error,n}},a.addOrGetCookieAsList=function(e,t){var n,o=[];try{o=JSON.parse(soclCookie.getCookie(e)),Array.isArray(o)||(n=o,o=[],"object"==typeof n&&o.push(n))}catch(e){o=[]}return t&&o.push(t),o.slice(Math.max(o.length-10,0))},a.addOrGetEvent=function(e,t,n){return a.addOrGetLocalStoreAsList(t,n)},a.addOrGetLocalStoreAsList=function(e,t){var n,o=[];try{soclCookie.getCookie(e)?(o=JSON.parse(soclCookie.getCookie(e)),a.setStoreValue(e,soclCookie.getCookie(e)),soclCookie.removeCookie(e)):a.getLocalStorageValue(e)&&(o=a.getLocalStorageValue(e)),Array.isArray(o)||(n=o,o=[],"object"==typeof n&&null!=n&&o.push(n))}catch(e){o=[]}return t&&o.push(t),o.slice(Math.max(o.length-10,0))};var N=new RegExp("^sm__");a.getLocalStorageValue=function(e){e=window.localStorage.getItem(T(e));return!e||"["!==e[0]&&"{"!==e[0]?e:k(e)},a.setLocalStorageValue=function(e,t){return window.localStorage.setItem(T(e),"object"==typeof t?JSON.stringify(t):t),t},a.getSessionStorageValue=function(e){e=window.sessionStorage.getItem(T(e));return!e||"["!==e[0]&&"{"!==e[0]?e:JSON.parse(e)},a.setSessionStorageValue=function(e,t){return window.sessionStorage.setItem(T(e),"object"==typeof t?JSON.stringify(t):t),t},a.getStoreValue=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},a.removeSessionValue=function(e){try{window.sessionStorage.removeItem(e)}catch(e){}},a.removeStoreValue=function(e){try{window.localStorage.removeItem(e)}catch(e){}},a.clearSession=function(){try{window.sessionStorage.clear()}catch(e){}},a.clearStore=function(){try{window.localStorage.clear()}catch(e){}},a.computePluginHit=function(n,o){soclHelper.getCID(function(t){0!==t&&soclHelper.getPID(o,function(e){0!==e&&soclPerfCounter.event(e,n,o,t)})})},a.getCID=function(e){var t=soclHelper.getStoreValue("smcid");null!==t&&""!==t?e(t):setTimeout(function(){0<--n?a.getCID(e):e(0)},1e3)},a.isInControlGroup=function(e,t){return e&&t&&e<=t},a.isInSuppressionGroup=function(e,t){if(!t)return!1;try{var n=soclHelper.getCustomerInfoFromLocalStorage(e),o=soclHelper.getOrCreateSMObj(e),n=n.features.find(function(e){return e.pluginId==t});return n&&soclHelper.isInControlGroup(o.randomNumber,n.controlGroupPercentage||0)}catch(e){console.log(e)}},a.getOrCreateSMObj=function(e){var t=soclConnect.getSMObjIdKey(e),e=a.getLocalStorageValue(t)||{};return e.clientId&&e.randomNumber||(e.clientId=e.clientId||soclConnect.generateRndGuidV4(),e.randomNumber=e.randomNumber||Math.floor(100*Math.random()+1),a.setLocalStorageValue(t,e)),e},a.getOrCreateSessionHash=function(e){var t="session-guid";return a.getSessionStorageValue(t)||a.setSessionStorageValue(t,a.createSessionHash(e))},a.getPID=function(e,t){e=soclHelper.getStoreValue("smpid_"+e);null!==e&&""!==e?t(e):setTimeout(function(){0<--o?a.getPID(t):t(0)},1e3)},a.getParamOnSession=function(e){var t=soclHelper.getSessionValue("paramOnSession");null!==t&&""!==t?e(t):setTimeout(function(){0<--g?a.getParamOnSession(e):e("")},1e3)},a.getPurchaseUrl=function(e){var t=soclHelper.getStoreValue("smpurl");null!==t&&""!==t&&"undefined"!==t?e(t.split(",")):setTimeout(function(){0<--d?a.getPurchaseUrl(e):e([])},1e3)},a.getTagsParameter=function(e){var t=soclHelper.getStoreValue("smtp");null!==t&&""!==t&&"undefined"!==t?e(JSON.parse(t)):setTimeout(function(){0<--p?a.getTagsParameter(e):e(new Array)},1e3)},a.getPushEndpoint=function(e){var t=soclHelper.getStoreValue("pushendpoint");null!==t&&""!==t?e(t):setTimeout(function(){0<--r?a.getPushEndpoint(e):e("")},1e3)},a.hasPushOptInBy=function(e,t){var n=soclHelper.getStoreValue("smpushoptin_"+e),o=soclHelper.getStoreValue("smid_"+e);null!==n&&""!==n&&0!=o?t(n):setTimeout(function(){0<--l?a.hasPushOptInBy(e,t):t(!1)},1e3)},a.decodeGuidFromBase32=function(e,t){t(soclBase32.decode(e))},a.guidValidation=function(e){return/^[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12}$/i.test(e)},a.hasFBOptIn=function(e){var t=soclHelper.getStoreValue("userConnected");null!==t&&""!==t?e(!0):setTimeout(function(){0<--u?a.hasFBOptIn(e):e(!1)},1e3)},a.getCloseUrl=function(e){var t=soclHelper.getStoreValue("smcloseurl");null!==t&&""!==t&&"undefined"!==t?e(t):setTimeout(function(){0<--f?a.getCloseUrl(e):e("")},1e3)},a.getRedirectUrl=function(e){var t=soclHelper.getStoreValue("smredirecturl");null!==t&&""!==t&&"undefined"!==t?e(t):setTimeout(function(){0<--f?a.getCloseUrl(e):e("")},1e3)},a.getPosition=function(){var e=document.documentElement,t=document.body,n="scrollTop",o="scrollHeight";return percent=(e[n]||t[n])/((e[o]||t[o])-e.clientHeight)*100},a.CGSplitTraffic=function(e,t){var n=new Math.seedrandom;result=n.quick(),result<=e?t(!0):t(!1)},a.userInControlGroup=function(e,t){var n;e.cgActive?(e=e.id,n=function(e){a.CGSplitTraffic(e.response.threshold,function(e){t(e)})},getCORS(apiUrl+"/customers/"+e+"/cgsettings/"+O+"?format=json",null,function(e){n(e)}),soclHelper.setSessionValue("controlGroupActive",!0)):t(!1)},a.showPlugin=function(e,t,n){soclHelper.getStoreValue(soclConnect.createSMIdKey(e));var o=soclHelper.getStoreValue(e),r=soclCookie.getCookie("viewedOuibounceModal_"+t);null!==o&&""!==o||"true"===r?n(!1):setTimeout(function(){0<--c?a.showPlugin(e,t,n):n(!0)},1e3)},a.createBaseIframe=function(){var e=document.createElement("iframe");return e.frameBorder="0",e.marginWidth="0",e.marginHeight="0",e.scrolling="no",e.width=1,e.height=1,e},a.injectDiv=function(e,t){var n;document.getElementById(e)||((n=document.createElement("div")).id=e,n.style.display=t,document.body.insertBefore(n,document.body.childNodes[0]))},a.removeElementById=function(e){document.getElementById(e)&&document.getElementById(e).remove()},a.injectManifest=function(e,t){var n=document.getElementsByTagName("script")[0],o=document.createElement("link");o.href=e+t,o.rel="manifest",n.parentNode.insertBefore(o,n)},a.injectCSS=function(e,t){if(!function(e,t,n,o){for(var r=document.getElementsByTagName(e),i=0,s=r.length;i<s;i++)if(r[i][t]==n+o)return!1;return!0}("link","href",e,t))return!1;var n=document.getElementsByTagName("script")[0],o=document.createElement("link");o.href=e+t,o.rel="stylesheet",n.parentNode.insertBefore(o,n)},a.injectPAJS=function(e){var t,n,o,r;document.getElementById("pajs")||(t=document.getElementsByTagName("script")[0],(n=document.createElement("script")).id="pajs",n.src=P+"pajs.min.js",n.type="text/javascript",t.parentNode.insertBefore(n,t)),o=e,r=window.setInterval(function(){try{"undefined"!=typeof Porthole?(window.clearInterval(r),o(!0)):0==--s&&(window.clearInterval(r),o(!1))}catch(e){}},1e3)},a.injectScrollJS=function(){var e,t;document.getElementById("scroll")||(e=document.getElementsByTagName("script")[0],(t=document.createElement("script")).id="scroll",t.src=P+"scroll.min.js",t.type="text/javascript",e.parentNode.insertBefore(t,e))},a.injectOUIBounce=function(){var e,t;document.getElementById("pajs_b")||(e=document.getElementsByTagName("script")[0],(t=document.createElement("script")).id="pajs_b",t.src=P+"ouibounce.min.js",t.type="text/javascript",e.parentNode.insertBefore(t,e))},a.injectCrawler=function(e,t){var n,o="sm_crawler",r="https://static.socialminer.com/customers/"+e+"/crawler/crawler.js";document.getElementById(o)?t&&setTimeout(t,1):(e=document.createElement("script"),n=function(){t&&t(),t=null},"undefined"==typeof smCrawler?(e.addEventListener("load",n),e.onerror=function(){console.error("Crawler not loaded: ",r),n()},e.id=o,e.type="text/javascript",e.src=r,(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,o)):setTimeout(function(){smCrawler(),n()},1))},a.insertAddonJs=function(){var e,t,n=soclHelper.getStoreValue("smcid");n&&(e="sm_addon",t="https://static.socialminer.com/custom/"+n+"/custom.js",document.getElementById(e)||((n=document.createElement("script")).id=e,n.type="text/javascript",n.src=t,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,t)))},a.removeAddonJs=function(){soclHelper.removeElementById("sm_addon")},a.IsGAEnabled=function(e){return null!==e&&""!==e&&"undefined"!==e&&"true"===e},a.checkGA=function(){return"function"==typeof ga},a.convertMS=function(e){var t,n=Math.floor(e/1e3),o=Math.floor(n/60);return n%=60,t=Math.floor(o/60),o%=60,{day:Math.floor(t/24),hour:t%=24,minute:o,seconds:n,decimalDay:(e/1e3/60/60/24).toFixed(2)}},a.prepareForSPA=function(e,t){b||(void 0===window.socl_checkIsSPA?(window.socl_checkIsSPA=!0,t&&soclHelper.simulateSPA(e)):b=!0)},a.simulateSPA=function(e){var t=history.pushState;history.pushState=function(){t.apply(history,arguments),socl.start(e,1)}},a.setIsSPA=function(){b=!0},a.checkIsSPA=function(){return b},a.initFirebase=function(t){if("undefined"!=typeof firebase)return 0<firebase.apps.length||firebase.initializeApp(E),t(!0);a.importFirebase(function(e){return e&&firebase.initializeApp(E),t(e)})},a.importFirebase=function(t){var e=document.createElement("script");document.head.appendChild(e),e.onload=function(){var e=document.createElement("script");document.head.appendChild(e),e.onload=function(){return t(!0)},e.src="https://www.gstatic.com/firebasejs/7.11.0/firebase-messaging.js"},e.src="https://www.gstatic.com/firebasejs/7.11.0/firebase-app.js"}}(soclHelper)},function(e,t){window.soclTracking={},function(c){function l(e){return e=soclHelper.contains(e,"&amp;")?soclHelper.replaceAll("&amp;","|",e):soclHelper.replaceAll("&","|",e)}function t(e,t){if(0<e.length)for(var n=0;n<e.length;n++)if(o=document.location.href,r=e[n],o=o.replace(/^(http|https):\/\//i,""),r=r.replace(/^(http|https):\/\//i,""),soclHelper.contains(o,r))return t(!0),0;var o,r;t(!1)}function i(e,t){if(soclHelper.guidValidation(e)){var n=[];t.logs.constructor==String&&(t.logs=JSON.parse(t.logs));for(var o=0;o<t.logs.length;o++)n.push(JSON.stringify({Url:encodeURIComponent(t.logs[o].url),Referrer:encodeURIComponent(t.logs[o].referrer),Date:t.logs[o].date,CustomerId:t.customerId,Price:t.logs[o].metadata?function(e){e=e.price||(e.product?e.product.price:"");return e?l(e):""}(t.logs[o].metadata):"",IsAvailable:void 0!==t.logs[o].metadata.notAvailable?l(t.logs[o].metadata.notAvailable):""}));i=e,s=n,a=t.dbName,c.actionBatch(i,s,function(e){e&&localStorage.removeItem("db_"+a)});try{var r=soclHelper.getOrCreateSMObj(t.customerId);soclHelper.postBehaviors(t.customerId,r.clientId,!0,e)}catch(e){console.log(e)}}var i,s,a}function s(e,t){var n,o=void 0;switch(e){case p:o=0<(n=document.getElementsByClassName(t)).length?n[0].innerHTML:o;break;case d:var r=document.getElementById(t),o=null!==r?r.innerHTML:o;break;case g:o=0<(n=document.getElementsByTagName(t)).length?n[0].innerHTML:o;break;case f:o=0<(n=document.getElementsByName(t)).length?n[0].innerHTML:o}return o}function a(n,o){soclConnect.getFbId(function(t){0<t?c.setSMIdByFbId(t,n.customerId,function(e){0!==e?o(e,!0):soclConnect.registerConnectedUser(t,n.customerId,5,null,function(e){o(e,!0)})}):o(0,!0)})}function o(e,t,n){"00000000000000000000000000000000"!==t.response.id?(soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t.response.id),soclHelper.setStoreValue("soclId",t.response.id),n(t.response.id)):n(0)}var u,r="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/tracking/html/",d=5,p=6,f=7,g=8,m=3,h=4,e=function(){(u=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"sm-tracking-iframe")).addEventListener(n)},n=function(r){void 0!==r.data.tracking&&soclHelper.getPurchaseUrl(function(e){t(e,function(e){var o,t=r.data.tracking,t=soclHelper.replaceAll("{0}",t,"logs_{0}"),n=c.getLocalDB(t);e?n.tableExists("items")&&(t=n.queryAll("items"),u.post({logs:t,anonymous:soclHelper.getStoreValue("smanonymous"),isPurchase:e})):(o=function(t){null!==t&&(n.tableExists("items")?n.update("items",{ID:n.rowCount("items")},function(e){return m===t.key?e.metadata.price=t.value.replace(/"/g,"").replace(/\s/g,""):e.metadata.notAvailable=t.value,e}):n.createTable("items",["url","referrer","date","metadata"]),n.commit()),n.tableExists("items")&&u.post({logs:n.queryAll("items"),anonymous:soclHelper.getStoreValue("smanonymous"),isPurchase:e})},soclHelper.getTagsParameter(function(e){e.constructor==String&&(e=JSON.parse(e));for(var t={},n=0;n<e.length;n++){switch(e[n].type){case m:void 0!==s(e[n].rule,e[n].value)&&(t.key=m,t.value=s(e[n].rule,e[n].value));break;case h:void 0!==s(e[n].rule,e[n].value)&&(t.key=h,t.value=s(e[n].rule,e[n].value))}if(void 0!==t.key){o(t);break}}void 0===t.key&&o(null)}))})}),void 0!==r.data.smid&&soclConnect.getId(r.data.customerId,function(n){var e,o=soclHelper.replaceAll("{0}",r.data.customerId,"logs_{0}");0==n&&0!=r.data.smid&&(soclHelper.setStoreValue(soclConnect.createSMIdKey(r.data.customerId),r.data.smid),soclHelper.setStoreValue("soclId",r.data.smid)),void 0!==r.data.checkOrganicPushNative&&!0===r.data.checkOrganicPushNative?soclHelper.hasPushOptInBy(r.data.customerId,function(e){var t={customerId:r.data.customerId,logs:c.getLocalDB(o).queryAll("items"),dbName:o};!e&&0==n||i(n,t)}):(e={customerId:r.data.customerId,logs:c.getLocalDB(o).queryAll("items"),dbName:o},0!==n&&i(n,e))}),void 0!==r.data.smAnonymousId&&soclConnect.getId(r.data.customerId,function(e){0!==e&&u.post({smAnonymousId:e})}),void 0!==r.data.smUserIdFromPushNative&&u.post({smUserIdFromPushNative:id})};c.getLocalDB=function(e){return new localStorageDB(e,localStorage)},c.createLogDB=function(t){var e="items";try{var n,o=c.getLocalDB(t),r=["url","referrer","date","metadata","clientId","sessionHash"];o.isNew()?(o.createTable(e,r),o.commit(),n=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"'),localStorage.setItem("db_"+t,n)):(o.tableExists(e)||(o.createTable(e,r),o.commit()),o.columnExists(e,"clientId")||(o.alterTable(e,["clientId","sessionHash"]),o.commit())),o.tableExists(e)||(o.createTable(e,r),o.commit())}catch(e){console.log("creation of table items error => "+t),localStorage.removeItem("db_"+t)}},c.createEventDB=function(t){var e="items";try{var n,o=c.getLocalDB(t),r=["sessionHash","event"];o.isNew()&&(o.createTable(e,r),o.commit(),n=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"'),localStorage.setItem("db_"+t,n)),o.tableExists(e)||(o.createTable(e,r),o.commit())}catch(e){console.log("creation of table items error => "+t),localStorage.removeItem("db_"+t)}},c.insertLogItem=function(t,e){try{var n=c.getLocalDB(t);n.tableExists("items")||c.createLogDB(t),n.insert("items",e),n.commit();n=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+t,n)}catch(e){localStorage.removeItem("db_"+t),c.createLogDB(t)}},c.insertEventItem=function(t,e){try{var n=c.getLocalDB(t);n.tableExists("items")||c.createEventDB(t),n.insert("items",e),n.commit();n=localStorage.getItem("db_"+t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+t,n)}catch(e){localStorage.removeItem("db_"+t),c.createEventDB(t)}},c.setSMIdToAnonymousUser=function(e,t){null!==t&&""!==t&&"undefined"!==t&&void 0!==t&&soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t)},c.setSMIdByUrl=function(e){var t=soclHelper.getQueryStringParams("smuid");null!==t&&""!==t&&"undefined"!==t&&void 0!==t&&soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t)},c.setSMIdByPush=function(t,e,n){getCORS(apiUrl+"/users/push/?format=json&customerId="+t+"&endpoint="+e,null,function(e){o(t,e,n)})},c.setSMIdByPushOrganic=function(t,e,n){postCORS(apiUrl+"/users/push",{customerId:t,pushEndpoint:e,isMobile:soclHelper.isMobile()},function(e){o(t,e,n)})},c.setSMIdByFbId=function(e,t,n){getCORS(apiUrl+"/users/social/"+e+"/?format=json&customerId="+t,null,function(e){o(t,e,n)})},c.createDataObj=function(e,t,n,o){return{soclId:e,url:(t=""===(t=t)||void 0===t?document.referrer:t,t=soclHelper.contains(t,"&amp;")?soclHelper.replaceAll("&amp;","|",t):soclHelper.replaceAll("&","|",t)),referrer:n,customerId:o}},c.actionBatch=function(e,t,n){0<t.length&&postCORS(apiUrl+"/users/"+e+"/action/batch?format=json",{Logs:t},function(e){n(!0)})},c.action=function(e,t){postCORS(apiUrl+"/users/"+e.soclId+"/action/?format=json",{customerId:e.customerId,url:e.url,referrer:e.referrer},function(e){t(!0)})},c.IsParametersOk=function(e){var t,n=!0;if(!e)return!1;for(t in e)if(!(n=!!e[t]))return n;return n},c.event=function(s,a){soclHelper.getCID(function(i){0!==i&&soclConnect.getId(i,function(e){if(0!==e){postCORS(apiUrl+"/users/"+e+"/event/?format=json",{customerId:i,eventName:s,parameters:c.IsParametersOk(a)?JSON.stringify(a):JSON.stringify({}),url:document.location.href,referrer:document.referrer},function(e){});try{var t=soclHelper.getOrCreateSMObj(i);soclHelper.postBehaviors(i,t.clientId,!0,e)}catch(e){console.log(e)}}else try{var n;s&&s.toLowerCase().includes("purchase")&&(t=soclHelper.getOrCreateSMObj(i),(n=soclHelper.getCustomerInfoFromLocalStorage(i))&&t&&n.sendAnonymousData&&soclHelper.isInControlGroup(t.randomNumber,n.baseSizePercent)&&soclHelper.postBehaviors(i,t.clientId,!0))}catch(e){console.log(e)}try{var o=soclHelper.addOrGetEvent(i,"sm_event_impact"),r=soclHelper.addOrGetEvent(i,"sm_views"),r=soclHelper.categorizeLastClick(o,r);r&&(r.additionalData.Sale=a||{},soclHelper.createEvent(r),r=soclHelper.replaceAll("-","",i),soclHelper.sendEvents(r,!0))}catch(e){console.log("SM - Failed on sending Presales event.")}})})},c.logViewToConnectedUser=function(o,r){soclConnect.getId(o.customerId,function(e){var t,n;0!==e?(o.dbName=soclHelper.replaceAll("{0}",o.customerId,"logs_{0}"),"true"==o.pushNativeEnabled?(t=o,n=function(e,t){r(e,t)},soclHelper.hasFBOptIn(function(e){e?soclHelper.hasPushOptInBy(t.customerId,function(e){e?(i(id,t),n(id,!1)):a(t,function(e,t){n(e,t)})}):a(t,function(e,t){n(e,t)})})):a(o,function(e,t){r(e,t)})):a(o,function(e,t){"true"==o.pushNativeEnabled?r(e,t):r(e,!1)})})},c.setPushOptInBy=function(e,t){},c.init=function(n){soclHelper.injectDiv("sm-tracking","none"),function(t){try{e(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){var t;!e||null!==(t=document.getElementById("sm-tracking"))&&((e=soclHelper.createBaseIframe()).setAttribute("src",r+"view.min.html?appId="+n.appId+"&id="+n.id+"&gaEnabled="+n.gaEnabled+"&pushNativeEnabled="+n.isPushNativeEnabled+"&smuid="+soclHelper.getQueryStringParams("smuid")+"&v=106&clientId="+n.clientId+"&sessionHash="+n.sessionHash),e.setAttribute("id","sm-tracking-iframe"),e.setAttribute("name","sm-tracking-iframe"),t.appendChild(e))}),soclHelper.setStoreValue("smcid",n.id),soclHelper.setStoreValue("smpurl",n.purchaseUrl),function(e){var t=[];e.constructor==String&&(e=JSON.parse(e));for(var n=0;n<e.length;n++)t.push({type:e[n].type.id,rule:e[n].rule.id,value:e[n].value});soclHelper.setStoreValue("smtp",JSON.stringify(t))}(n.tagsParameter)},c.clearInstance=function(){void 0!==u&&u.removeEventListener(n),soclHelper.removeElementById("sm-tracking")}}(soclTracking)},function(e,t){window.soclConnect={},function(l){function a(e){"none"!=this.returnUri&&void 0!==this.returnUri?window.location=this.returnUri:e(!0)}function u(o,e,t,n,r){var i=o.split("-").join(""),s=null!=(i=soclHelper.getStoreValue("smid_"+i))&&null!=i&&0!=i?{customerId:o,sourceId:e,facebookId:n,accessToken:t,userPushMessagingId:i}:{customerId:o,sourceId:e,facebookId:n,accessToken:t};(i=soclHelper.getQueryStringParams("userId"))&&(s.userId=i),postCORS(apiUrl+"/users?format=json",s,function(e){var t,n=e.response.id;try{"00000000000000000000000000000000"!==n&&(s.personId=soclHelper.getStoreValue("smid_"+s.customerId)||n,s.source=s.sourceId,s.channelId=s.channelId||soclHelper.getQueryStringParams("pluginId"),s.device=soclHelper.isMobile()?d:c,(t=soclHelper.extractClientIdFromUrl())&&(s.clientId=t),s.sessionHash=soclHelper.extractSessionHashFromUrl(),s.sessionHash||(s.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",s,function(e){var t=soclHelper.replaceAll("-","",e.response.personid),e=soclHelper.getStoreValue("smid_"+s.customerId);(!e||e&&t!==e)&&(soclHelper.setStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",o)),t),soclHelper.setStoreValue("soclId",t));e=soclTracking.createDataObj(t,document.referrer,document.referrer,o);soclTracking.action(e,function(e){a(function(e){r(e,t)})})}))}catch(e){console.log("SM - [URSA] - registerUser - POST Wonka/ursa/profiles. Failed: ".concat(e))}})}function i(o,r){postCORS(apiUrl+"/users/"+o.userId+"?format=json",o,function(e){var t,n=e.response.id;try{"00000000000000000000000000000000"!==n?(o.personId=n,o.customerId=o.customerId||soclHelper.getQueryStringParams("id"),o.channelId=o.channelId||soclHelper.getQueryStringParams("pluginId"),o.device=soclHelper.isMobile()?d:c,(t=soclHelper.extractClientIdFromUrl())&&(o.clientId=t),o.sessionHash=soclHelper.extractSessionHashFromUrl(),o.sessionHash||(o.sessionHash=soclHelper.getOrCreateSessionHash()),o.endpoint&&(o.token=o.endpoint),postCORS(wonkaUrl+"/ursa/profiles",o,function(e){var t=soclHelper.replaceAll("-","",e.response.personid),e=soclHelper.getStoreValue("smid_"+o.customerId);(!e||e&&t!==e)&&(soclHelper.setStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",o.customerId)),t),soclHelper.setStoreValue("soclId",t)),r(!0)})):(console.log("SM - [URSA] - updateUser - POST Wonka/ursa/profiles. Failed response from API. Request: ".concat(apiUrl+"/users/"+o.userId+"?format=json")),r(!1))}catch(e){console.log("SM - [URSA] - updateUser - POST Wonka/ursa/profiles. Failed: ".concat(e)),r(!1)}})}var o=2,t=4,c=1,d=2,p={Type:{Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_ConclusionWithRejection:"Channel.Step.ConclusionWithRejection"},Step:{Empty:"",OS_LightBox_FBConnect:"OS.LightBox.0.FBConnect"}},r=function(e,t,n){var o=soclHelper.createBaseIframe();o.width=e.getAttribute("data-width"),o.height=e.getAttribute("data-height"),o.setAttribute("src","https://widgets.soclminer.com.br/v2/social/js/widgets/connect/"+t+"/index.html?scope="+e.getAttribute("data-scope")+"&id="+n),e.appendChild(o)};l.generateRndGuid=function(){return uuid.v1()},l.generateRndGuidV4=function(){return uuid.v4()},l.createSMIdKey=function(e){return"smid_"+soclHelper.replaceAll("-","",e)},l.getSMObjIdKey=function(e){return"smObj-"+soclHelper.replaceAll("-","",e)},l.render=function(e){var t=e.featureSettings.folderName,n=document.getElementsByClassName("sm-connect");null!==n&&0<n.length&&function(e,t,n){for(var o=0;o<e.length;o++)r(e[o],t,n)}(n,t,e.id)},l.signIn=function(n,o,e,r,i){this.scope="email,public_profile";var s=soclHelper.getQueryStringParams("pluginId"),a=0;try{var t=document.location.href.split("social/");(t=t[1].split("/"))&&0<t.length&&(a=t[0])}catch(e){console.log("SM - [URSA] - signIn - Failed while spliting URL: ".concat(e))}try{var c={type:p.Type.Channel_Step_View,step:p.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s};c.channelId&&soclBounce.createEventProxy(c)}catch(e){console.log("SM - [URSA] - signIn - Failed while sending event: ".concat(e))}l.fbEnsureInit(function(e){null!==e&&FB.login(function(e){if(e.authResponse){"none"!=r&&(this.returnUri=r);try{e.authResponse.grantedScopes&&(e.authResponse.grantedScopes.includes("email")?(t={type:p.Type.Channel_Step_Conclusion,step:p.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s||soclHelper.getQueryStringParams("pluginId"),customerId:n}).channelId&&soclBounce.createEventProxy(t):(t={type:p.Type.Channel_Step_ConclusionWithRejection,step:p.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s,customerId:n}).channelId&&soclBounce.createEventProxy(t))}catch(e){console.log("SM - [URSA] - fbEnsureInit - Failed while sending event: ".concat(e))}u(n,o,e.authResponse.accessToken,e.authResponse.userID,function(e){i(e)})}else{try{var t;(t={type:p.Type.Channel_Step_Rejection,step:p.Step.OS_LightBox_FBConnect.replace("0",a),channelId:s,customerId:n}).channelId&&soclBounce.createEventProxy(t)}catch(e){console.log("SM - [URSA] - fbEnsureInit - Failed while sending event: ".concat(e))}i(!1)}},{scope:"email,public_profile",return_scopes:!0})})},l.signInWithMail=function(o,r){postCORS(apiUrl+"/users?format=json",o,function(e){var t,n=e.response.id;try{"00000000000000000000000000000000"!==n&&(o.personId=n,o.channelId=o.channelId||soclHelper.getQueryStringParams("pluginId"),o.device=soclHelper.isMobile()?d:c,(t=soclHelper.extractClientIdFromUrl())&&(o.clientId=t),o.sessionHash=soclHelper.extractSessionHashFromUrl(),o.sessionHash||(o.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",o,function(e){var t=soclHelper.replaceAll("-","",e.response.personid),e=soclHelper.getStoreValue("smcid"),e=soclHelper.getStoreValue("smid_"+e);(!e||e&&t!==e)&&(soclHelper.setStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",o.customerId)),t),soclHelper.setStoreValue("soclId",t));t=soclTracking.createDataObj(t,o.url,o.referrer,o.customerId);soclTracking.action(t,function(e){r(e)})}))}catch(e){console.log("SM - [URSA] - signInWithMail - POST Wonka/ursa/profiles. Failed: ".concat(e))}})},l.signInOrganic=function(e,o,t,r){var i;/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.email.value)&&o&&((i={}).Email=e.email.value,i.SourceId=t,i.CustomerId=o,i.Source=24!==(t=t)?t:2,e.firstName&&(i.FirstName=e.firstName.value),e.lastName&&(i.LastName=e.lastName.value),e.pictureUrl&&(i.PictureUrl=e.pictureUrl.value),e.gender&&(i.Gender=e.gender.value),e.locale&&(i.Locale=e.locale.value),e.timezone&&(i.Timezone=e.timezone.value),e.phone&&(i.Phone=e.phone.value),postCORS(apiUrl+"/users?format=json",i,function(e){var t,n=e.response.id;try{"00000000000000000000000000000000"!==n&&(i.personId=n,i.device=i.deviceType||null,i.channelId=i.channelId||soclHelper.getQueryStringParams("pluginId"),i.device=soclHelper.isMobile()?d:c,(t=soclHelper.extractClientIdFromUrl())&&(i.clientId=t),i.sessionHash=soclHelper.extractSessionHashFromUrl(),i.sessionHash||(i.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",i,function(e){var t=soclHelper.replaceAll("-","",e.response.personid),e=soclHelper.getStoreValue("smid_"+i.CustomerId);(!e||e&&t!==e)&&(soclHelper.setStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",o)),t),soclHelper.setStoreValue("soclId",t));t=soclTracking.createDataObj(t,document.URL,document.referrer,o);soclTracking.action(t,function(e){r()})}))}catch(e){console.log("SM - [URSA] - signInOrganic - POST Wonka/ursa/profiles. Failed: ".concat(e))}}))},l.updateOrganic=function(e,t,n,o){var r;t&&n&&((r={}).userId=n,r.customerId=t,e.email&&(r.Email=e.email.value),e.firstName&&(r.FirstName=e.firstName.value),e.gender&&(r.Gender=e.gender.value),e.phone&&(r.Phone=e.phone.value),i(r,function(e){o()}))},l.signInWithPush=function(o,e,t,n,r,i){var s,a;t&&!soclHelper.getStoreValue("pushendpoint")&&((s=soclHelper.getStoreValue("smid_"+o))&&!/^[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12}$/i.test(s)&&(soclHelper.removeStoreValue("smid_"+o),r(!1)),a={customerId:o,sourceId:e,endpoint:t,deviceType:n},(n=soclHelper.getQueryStringParams("userId"))?a.userId=n:s&&0!=s&&(a.userPushMessagingId=s),postCORS(apiUrl+"/users?format=json",a,function(e){var t,n=e.response.id;try{"00000000000000000000000000000000"!==n&&(a.personId=n,a.token=a.endpoint,a.channelId=a.channelId||i,a.device=soclHelper.isMobile()?d:c,(t=soclHelper.extractClientIdFromUrl())&&(a.clientId=t),a.sessionHash=soclHelper.extractSessionHashFromUrl(),a.sessionHash||(a.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",a,function(e){var t=soclHelper.replaceAll("-","",e.response.personid),e=soclHelper.getStoreValue("smid_"+a.customerId);(!e||e&&t!==e)&&(soclHelper.setStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",o)),t),soclHelper.setStoreValue("soclId",t)),r(t)}))}catch(e){console.log("SM - [URSA] - signInWithPush - POST Wonka/ursa/profiles. Failed: ".concat(e))}}))},l.registerSmartLinkProfile=function(n,o){var r={customerId:n};soclHelper.getStoreValue("smSmartId")&&(r.smartLinkId=soclHelper.getStoreValue("smSmartId"));try{"00000000000000000000000000000000"!==r.smartLinkId&&(soclHelper.getStoreValue("smid_"+r.customerId)&&(r.personId=soclHelper.getStoreValue("smid_"+r.customerId)),r.device=soclHelper.isMobile()?d:c,r.sessionHash=soclHelper.extractSessionHashFromUrl(),r.sessionHash||(r.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",r,function(e){var t=soclHelper.replaceAll("-","",e.response.personid),e=soclHelper.getStoreValue("smid_"+r.customerId);(!e||e&&t!==e)&&(soclHelper.setStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",n)),t),soclHelper.setStoreValue("soclId",t));e=soclTracking.createDataObj(t,document.referrer,document.referrer,n);soclTracking.action(e,function(e){a(function(e){void 0!==o&&o(e,t)})})}))}catch(e){console.log("SM - [URSA] - registerUser - POST Wonka/ursa/profiles. Failed: ".concat(e))}},l.registerAnonymousUser=function(n,o,e,r){var i=soclHelper.getStoreValue(l.createSMIdKey(soclHelper.replaceAll("-","",n)));null==i&&""==i||postCORS(apiUrl+"/users/"+o+"/anonymous?format=json",{customerId:n,userId:o,isControlGroup:e},function(e){soclHelper.setStoreValue(i,o);var t=soclTracking.createDataObj(o,document.location.href,document.referrer,n);soclTracking.action(t,function(e){r(e)})})},l.registerConnectedUser=function(t,n,o,e,r){0<t?l.getFbCurrentAccessToken(function(e){""!==e?u(n,o,e,t,function(e,t){r(t)}):r(!1)}):r(!1)},l.updateConnectedUser=function(e,t){i(e,function(e){t(e)})},l.userExists=function(t,n){l.getFbId(function(e){0<e?getCORS(apiUrl+"/users/social/"+e+"/?format=json&customerId="+t,null,function(e){"00000000000000000000000000000000"!==e.response.id?n(!0):n(!1)}):n(!1)})},l.getId=function(e,t){var n=soclHelper.getStoreValue(l.createSMIdKey(e));null!==n&&""!==n?t(n):setTimeout(function(){0<--o?l.getId(e,t):t(0)},1e3)},l.getStatus=function(t){l.fbEnsureInit(function(e){null!==e&&FB.getLoginStatus(function(e){"connected"===e.status?t(!0):(e.status,t(!1))})})},l.getFbCurrentAccessToken=function(t){l.fbEnsureInit(function(e){null!==e&&FB.getLoginStatus(function(e){"connected"===e.status?t(e.authResponse.accessToken):t("")})})},l.getFbId=function(t){l.fbEnsureInit(function(e){null!==e?FB.getLoginStatus(function(e){"connected"===e.status?t(e.authResponse.userID):t(0)}):t(0)})},l.getFbPermissions=function(t){l.fbEnsureInit(function(e){null!==e&&FB.api("/me/permissions",function(e){t(e)})})},l.fbEnsureInit=function(e){window.fbApiInit?e&&e():setTimeout(function(){0<--t?l.fbEnsureInit(e):e(null)},1e3)},l.fbSettings=function(e,t){var n,o;(e="undefined"==e?void 0:e)&&(this.appId=e,this.channelUrl=t,window.fbAsyncInit=function(){FB.init({appId:e,channelUrl:void 0,status:!0,cookie:!0,xfbml:!0,version:"v2.12"}),fbApiInit=!0},n=document,o="facebook-jssdk",t=n.getElementsByTagName("script")[0],n.getElementById(o)||((n=n.createElement("script")).id=o,n.src="//connect.facebook.net/en_US/sdk.js",t.parentNode.insertBefore(n,t)),document.getElementById("fb-root")||((t=document.createElement("div")).id="fb-root",document.body.insertBefore(t,document.body.childNodes[0])))}}(soclConnect)},function(e,t){window.socl={},function(t){function v(e){var t;void 0!==e.paramOnSession&&""!==e.paramOnSession&&(null!==(t=soclHelper.getSessionValue("paramOnSession"))&&""!==t?t+="|"+e.paramOnSession:t=e.paramOnSession,soclHelper.setSessionValue("paramOnSession",t))}var e=20,S={Presales_Impact:"Presales.Impact"};t.inject=function(e){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.src=e,t.parentNode.insertBefore(n,t)},t.execute=function(){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",setTimeout(function(){e--,"undefined"!=typeof soclTracking?window.soclInit():0<e&&t.execute()},2e3)},t.emmit={onView:function(e){e.event="view",t.onView&&t.onView(e)},onClick:function(e){e.event="click",t.onClick&&t.onClick(e)},onClose:function(e){e.event="close",t.onClose&&t.onClose(e)},onEvent:function(e){t.onEvent&&t.onEvent(e)}},t.refresh=function(e){e&&(soclPush.clearInstance(),soclBounce.clearInstance(),soclOnsiteSales.clearInstance(),soclTracking.clearInstance(),soclHelper.removeAddonJs(),soclHelper.setIsSPA(),t.start(e))},t.start=function(f){var g,e,m,h,t;!f||(t=f,window.socl_BlackList&&-1<window.socl_BlackList.indexOf(t)||window.socl_BlackListDNS&&-1<window.socl_BlackListDNS.indexOf(window.location.hostname))||(this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",g=soclHelper.getStoreValue(soclConnect.createSMIdKey(f)),t=soclHelper.replaceAll("-","",f),g&&!soclHelper.guidValidation(g)&&(soclHelper.removeStoreValue(soclConnect.createSMIdKey(f)),soclHelper.removeStoreValue("smpushoptin_"+t),soclHelper.removeStoreValue(t)),g||(e=soclHelper.getSMPIdFromURI())&&soclHelper.decodeGuidFromBase32(e,function(e){e&&(e=soclHelper.replaceAll("-","",e),soclHelper.setStoreValue(soclConnect.createSMIdKey(f),e))}),(e=soclHelper.getSMSmartIdFromURI())&&(e=soclBase32.decode(e),soclHelper.setStoreValue("smSmartId",e),soclConnect.registerSmartLinkProfile(t)),m=soclHelper.getOrCreateSMObj(f),h=soclHelper.getOrCreateSessionHash(f),t=encodeURIComponent(document.location.href),soclHelper.getCustomerInfo(f,t,function(e){if(void 0!==e.response){var t={id:e.response.id,appId:e.response.appId,name:e.response.name,dns:e.response.customDNS,forceRedirect:e.response.forceRedirect,gaEnabled:e.response.gaEnabled,cgActive:e.response.cgActive,purchaseUrl:e.response.purchaseUrl,pageId:e.response.facebookPageId,featureSettings:{folderName:"",pluginParameters:"",pluginTypeId:"",pluginId:"",version:"",startDate:"",endDate:""},isPushNativeEnabled:!1,timeInSite:0,googleApp:2,sendAnonymousData:e.response.sendAnonymousData,baseSizePercent:e.response.baseSizePercent,features:e.response.features};t.clientId=m.clientId,t.sessionHash=h,soclHelper.setCustomerInfoToLocalStorage(t);var n=e.response.features.find(function(e){return"f4456763b8cb412a9e5cf2a11f2b6222"==e.feature.id});n&&5===n.pluginTypeId&&(n=JSON.parse(n.pluginParameters),t.isPushNativeEnabled=n.native,t.googleApplicationId=n.GoogleAppTypeId,t.daysToShowAfterView=n.daysToShowAfterView,t.timeInSite=n.TimeInSite,t.googleApplicationId&&(t.googleApp=t.googleApplicationId)),soclHelper.removeSessionValue("paramOnSession");for(var o,r=0;r<e.response.features.length;r++)switch(t.featureSettings={folderName:e.response.features[r].folderName,pluginTypeId:"",pluginId:"",version:"",startDate:"",endDate:""},e.response.features[r].feature.id){case"ce48903b935c436f8c696585e8df1f36":var i=soclHelper.replaceAll("-","",f),s=soclHelper.replaceAll("{0}",i,"logs_{0}");soclTracking.createLogDB(s),soclTracking.createEventDB("events_"+i);try{var a=document.location.href,c=document.location.search.substr(1),l=soclHelper.urlContainsSpecificParams(c);l&&(l.create_date=soclHelper.getNow(),l.path=window.location.pathname,c=soclHelper.addOrGetEvent(f,"sm_event_impact",l),soclHelper.setLocalStorageValue("sm_event_impact",JSON.stringify(c)),"smid"in l&&(c={type:S.Presales_Impact,additionalData:{Impact:c,Sale:{}}},soclHelper.createEvent(c)))}catch(e){console.log("SM - Failed on getting URL query string params.",a)}try{not_flagged_cids=["bf9e9d92-2179-47c0-95a9-9eea5b4a49ba","8c6c91cd-1ff6-4c96-9f0f-8dcc777fbdb2","8de3a407-26d1-4417-8741-d36bd0c3f554"],not_flagged_cids.includes(f)?soclHelper.sendEvents(i,!0):soclHelper.sendEvents(i)}catch(e){console.log("SM - Failed on sending events.",e)}soclHelper.injectCrawler(f,function(){var e={url:document.location.href,referrer:document.referrer,date:soclHelper.getNow(),metadata:soclHelper.getMetadata(),sessionHash:soclHelper.getSessionHash(),clientId:m.clientId};if(soclTracking.insertLogItem(s,e),!g&&t.sendAnonymousData&&soclHelper.isInControlGroup(m.randomNumber,t.baseSizePercent))try{soclHelper.postBehaviors(f,m.clientId)}catch(e){console.log(e)}}),t.tagsParameter=e.response.tagsParameter,soclTracking.init(t);break;case"f4456763b8cb412a9e5cf2a11f2b6222":case"6fb5edd41bda496593802a9d0acf8595":var u=e.response.features[r];v(u);var d,p=JSON.parse(JSON.stringify(t));u.pluginId?(p.featureSettings.pluginTypeId=u.pluginTypeId,p.featureSettings.pluginId=u.pluginId,p.featureSettings.version=u.version,0<p.timeInSite?setTimeout(function(){soclPush.render(p)},1e3*p.timeInSite):soclPush.render(p)):(soclHelper.injectDiv("sm-push-tracking","none"),d=document.getElementById("sm-push-tracking"),soclHelper.hasPushOptInBy(p.id,function(e){soclPush.createPushTrackingIFrame(p,e,d)}));break;case"89981d318e7f4fa9bf267e5498ac6688":v(e.response.features[r]),e.response.features[r].pluginId&&t.appId&&(t.featureSettings.pluginTypeId=e.response.features[r].pluginTypeId,t.featureSettings.pluginId=e.response.features[r].pluginId,t.featureSettings.version=e.response.features[r].version,t.featureSettings.pluginParameters=e.response.features[r].pluginParameters,t.featureSettings.storyId=e.response.features[r].storyId,o=parseInt(soclHelper.getSessionValue("pagesview_"+t.featureSettings.pluginId)),isNaN(o)?soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,1):(o+=1,soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,o)),soclBounce.render(JSON.parse(JSON.stringify(t))));break;case"3f1df6d723414bb9bc2e23ccb33e8d8b":v(e.response.features[r]),e.response.features[r].pluginId&&(t.featureSettings.pluginTypeId=e.response.features[r].pluginTypeId,t.featureSettings.pluginId=e.response.features[r].pluginId,t.featureSettings.version=e.response.features[r].version),soclOnSite.render(JSON.parse(JSON.stringify(t)));break;case"5491c86eda73474a907c6e4adb18ee99":v(e.response.features[r]),e.response.features[r].pluginId&&(u=e.response.features[r],t.featureSettings.pluginTypeId=u.pluginTypeId,t.featureSettings.pluginId=u.pluginId,t.featureSettings.version=u.version,t.featureSettings.pluginParameters=soclHelper.formatUrlPipe(u.pluginParameters),t.featureSettings.startDate=u.startDate,t.featureSettings.endDate=u.endDate,o=parseInt(soclHelper.getSessionValue("pagesview_"+t.featureSettings.pluginId)),isNaN(o)?soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,1):(o+=1,soclHelper.setSessionValue("pagesview_"+t.featureSettings.pluginId,o))),soclOnsiteSales.render(JSON.parse(JSON.stringify(t)))}soclHelper.insertAddonJs()}}))}}(socl),function(){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",this.wonkaUrl="https://"+soclHelper.getEnvironment()+"wonka.socialminer.com",socl.execute()}(document)},function(e,t){!function(o){"use strict";function i(){}var s=!1,a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,r={debug:!(i.extend=function(e){var r=this.prototype;s=!0;var t,n=new this;for(t in s=!1,e)n[t]="function"==typeof e[t]&&"function"==typeof r[t]&&a.test(e[t])?function(n,o){return function(){var e=this._super;this._super=r[n];var t=o.apply(this,arguments);return this._super=e,t}}(t,e[t]):e[t];function o(){!s&&this.init&&this.init.apply(this,arguments)}return((o.prototype=n).constructor=o).extend=i.extend,o}),trace:function(e){this.debug&&void 0!==o.console&&o.console.log("Porthole: "+e)},error:function(e){o.console,"function"==typeof o.console.error&&o.console.error("Porthole: "+e)},WindowProxy:function(){}};r.WindowProxy.prototype={post:function(e,t){},addEventListener:function(e){},removeEventListener:function(e){}},r.WindowProxyBase=i.extend({init:function(e){void 0===e&&(e=""),this.targetWindowName=e,this.origin=o.location.protocol+"//"+o.location.host,this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},getTargetWindow:function(){return r.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(e,t){void 0===t&&(t="*"),this.dispatchMessage({data:e,sourceOrigin:this.getOrigin(),targetOrigin:t,sourceWindowName:o.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(e){return this.eventListeners.push(e),e},removeEventListener:function(e){var t;try{t=this.eventListeners.indexOf(e),this.eventListeners.splice(t,1)}catch(e){this.eventListeners=[]}},dispatchEvent:function(e){for(var t=0;t<this.eventListeners.length;t++)try{this.eventListeners[t](e)}catch(e){r.error(e)}}}),r.WindowProxyLegacy=r.WindowProxyBase.extend({init:function(e,t){this._super(t),null!==e?(this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=e,this.proxyIFrameElement=this.createIFrameProxy()):(this.proxyIFrameElement=null,r.trace("proxyIFrameUrl is null, window will be a receiver only"),this.post=function(){throw new Error("Receiver only window")})},createIFrameProxy:function(){var e=document.createElement("iframe");return e.setAttribute("id",this.proxyIFrameName),e.setAttribute("name",this.proxyIFrameName),e.setAttribute("src",this.proxyIFrameLocation),e.setAttribute("frameBorder","1"),e.setAttribute("scrolling","auto"),e.setAttribute("width",30),e.setAttribute("height",30),e.setAttribute("style","position: absolute; left: -100px; top:0px;"),e.style.setAttribute&&e.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(e),e},dispatchMessage:function(e){var t=o.encodeURIComponent;this.proxyIFrameElement&&(e=this.proxyIFrameLocation+"#"+t(r.WindowProxy.serialize(e)),this.proxyIFrameElement.setAttribute("src",e),this.proxyIFrameElement.height=50<this.proxyIFrameElement.height?50:100)}}),r.WindowProxyHTML5=r.WindowProxyBase.extend({init:function(e,t){this._super(t),this.eventListenerCallback=null},dispatchMessage:function(e){this.getTargetWindow().postMessage(r.WindowProxy.serialize(e),e.targetOrigin)},addEventListener:function(e){var t;return 0===this.eventListeners.length&&(t=this,o.addEventListener?(this.eventListenerCallback=function(e){t.eventListener(t,e)},o.addEventListener("message",this.eventListenerCallback,!1)):o.attachEvent&&(this.eventListenerCallback=function(e){t.eventListener(t,o.event)},o.attachEvent("onmessage",this.eventListenerCallback))),this._super(e)},removeEventListener:function(e){this._super(e),0===this.eventListeners.length&&(o.removeEventListener?o.removeEventListener("message",this.eventListenerCallback):o.detachEvent&&(void 0===o.onmessage&&(o.onmessage=null),o.detachEvent("onmessage",this.eventListenerCallback)),this.eventListenerCallback=null)},eventListener:function(e,t){var n=r.WindowProxy.unserialize(t.data);!n||""!==e.targetWindowName&&n.sourceWindowName!=e.targetWindowName||e.dispatchEvent(new r.MessageEvent(n.data,t.origin,e))}}),o.postMessage?(r.trace("Using built-in browser support"),r.WindowProxy=r.WindowProxyHTML5.extend({})):(r.trace("Using legacy browser support"),r.WindowProxy=r.WindowProxyLegacy.extend({})),r.WindowProxy.serialize=function(e){if("undefined"==typeof JSON)throw new Error("Porthole serialization depends on JSON!");return JSON.stringify(e)},r.WindowProxy.unserialize=function(e){if("undefined"==typeof JSON)throw new Error("Porthole unserialization dependens on JSON!");try{var t=JSON.parse(e)}catch(e){return!1}return t},r.WindowProxy.getTargetWindow=function(e){return""===e?parent:("top"===e||"parent"===e?o:o.frames)[e]},r.MessageEvent=function(e,t,n){this.data=e,this.origin=t,this.source=n},r.WindowProxyDispatcher={forwardMessageEvent:function(e){var t,n=o.decodeURIComponent;0<document.location.hash.length&&(t=r.WindowProxy.unserialize(n(document.location.hash.substr(1))),n=r.WindowProxy.getTargetWindow(t.targetWindowName),(n=r.WindowProxyDispatcher.findWindowProxyObjectInWindow(n,t.sourceWindowName))?n.origin===t.targetOrigin||"*"===t.targetOrigin?n.dispatchEvent(new r.MessageEvent(t.data,t.sourceOrigin,n)):r.error("Target origin "+n.origin+" does not match desired target of "+t.targetOrigin):r.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(e,t){if(e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))try{if(null!==e[n]&&"object"==typeof e[n]&&e[n]instanceof e.Porthole.WindowProxy&&e[n].getTargetWindowName()===t)return e[n]}catch(e){}return null},start:function(){o.addEventListener?o.addEventListener("resize",r.WindowProxyDispatcher.forwardMessageEvent,!1):o.attachEvent&&"undefined"!==o.postMessage||document.body.attachEvent?o.attachEvent("onresize",r.WindowProxyDispatcher.forwardMessageEvent):r.error("Cannot attach resize event")}},o.soclPorthole=r}("undefined"!=typeof window?window:this)},function(e,t){function a(e,t){var n=new XMLHttpRequest;try{return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}catch(e){}}function r(e){var t="";for(key in e)t=t+"&"+key+"="+e[key];return t=t.substr(1,t.length)}function c(e){return soclHelper.guidValidation(soclHelper.replaceAll("-","",e))}window.getCORS=function(e,t,n){var o=a("GET",e);o&&(o.onreadystatechange=function(){4==o.readyState&&""!==o.responseText&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},o.send())},window.postCORS=function(e,t,n){var o=a("POST",e);o&&(o.onreadystatechange=function(){4==o.readyState&&""!==o.responseText&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},params=r(t),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(params))};function l(e){return!(e&&!c(e))}window.postJsonCORS=function(e,t,n){if(t&&(t.events&&t.events.length||t.behaviors&&t.behaviors.length)){if(t.events)for(var o=0;o<t.events.length;o++){var r=t.events[o];if(!((r=r).type&&c(r.customerId)&&l(r.personId)&&l(r.channelId)&&l(r.clientId))&&(console.error("invalid event"),console.log(r),1))return}if(t.behaviors)for(o=0;o<t.behaviors.length;o++){var i=t.behaviors[o];if(!(l((i=i).customerId)&&l(i.personId)&&l(i.clientId))&&(console.error("invalid behavior"),console.log(i),1))return}var s=a("POST",e);s&&(s.onreadystatechange=function(){4==s.readyState&&""!==s.responseText&&n&&n(JSON.parse(s.responseText),"success")},s.onerror=function(){},s.setRequestHeader("Content-type","application/json;charset=UTF-8"),s.send(JSON.stringify(t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"')))}},window.putCORS=function(e,t,n){var o=a("PUT",e);o&&(o.onreadystatechange=function(){4==o.readyState&&""!==o.responseText&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},params=r(t),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(params))},window.deleteCORS=function(e,t,n){var o=a("DELETE",e);o&&(o.onreadystatechange=function(){4==o.readyState&&n(JSON.parse(o.responseText),"success")},o.onerror=function(){},params=r(t),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(params))}},function(e,t){var s;window.soclPerfCounter={},(s=soclPerfCounter).type={Click:1,View:2,Impression:3,PushBlocked:7,PushErrorWhileGetToken:8},s.event=function(e,t,n,o){var r,i,n={pluginId:e,actionTypeId:t,pluginTypeId:n,customerId:o};o=n,r=function(e){},postCORS(apiUrl+"/plugins/"+o.pluginId+"/performance/"+o.actionTypeId+"?format=json",{pluginTypeId:o.pluginTypeId,customerId:o.customerId},function(e){r(!0)}),t===s.type.Click&&(n=n,i=function(e){},postCORS(apiUrl+"/plugins/"+n.pluginId+"/performance/abtest?format=json",{pluginTypeId:n.pluginTypeId,customerId:n.customerId},function(e){i(!0)}))}},function(e,t){window.soclBounce={},function(t){function n(n){soclHelper.injectDiv("sm-bounce","none");var o=document.getElementById("sm-bounce");soclHelper.showPlugin(n.id,l,function(e){e?soclHelper.userInControlGroup(n,function(e){e?soclConnect.registerAnonymousUser(n.id,soclConnect.generateRndGuid(),!0,function(e){soclHelper.setStoreValue("smanonymous",JSON.stringify({IsControlGroup:!0,Active:e}))}):function(e,t){f.Step.OS_LightBox=f.Step.OS_LightBox.replace("0",e),f.Step.OS_LightBox_Email=f.Step.OS_LightBox_Email.replace("0",e),f.Step.OS_LightBox_FBConnect=f.Step.OS_LightBox_FBConnect.replace("0",e),e===v?soclHelper.injectCSS(h,"socialbounce.min.css"):e===S||e===I?soclHelper.injectCSS(h,"bounce-survey.min.css"):e===y||e===w||e===C||e===b||e===C||e===b?soclHelper.injectCSS(h,"plugin-lightbox.min.css"):soclHelper.injectCSS(h,"bounce-image.min.css");try{_(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(s=n.featureSettings.pluginTypeId,function(e){var t;e&&(a=n.featureSettings.pluginId,c=n.id,l=n.featureSettings.storyId,r=n.forceRedirect,m=soclHelper.replaceAll("{CID}",soclHelper.toGUID(n.id),m),m=soclHelper.replaceAll("{PTID}",s,m),m=soclHelper.replaceAll("{PID}",n.featureSettings.pluginId,m),o.innerHTML=(e='<iframe src="'+m+"/index.html?scope=&id="+(t=n).id+"&pluginId="+t.featureSettings.pluginId+"&gaEnabled="+t.gaEnabled+"&version="+t.featureSettings.version+"&clientId="+t.clientId+"&sessionHash="+t.sessionHash+soclHelper.getSMIDToIFrameSrc(t.id)+'" name="social-lightBox-iframe" scrolling="no" frameborder="0" allowtransparency="true" id="social-lightBox-iframe"></iframe>',t.featureSettings.pluginTypeId===v?'<div id="SocialLightbox">'+e+'</div><div id="SocialLightboxBlock"></div>':t.featureSettings.pluginTypeId===S||t.featureSettings.pluginTypeId===I?'<div id="BounceSurveyBox">'+e+'</div><div id="BounceSurvey"></div>':t.featureSettings.pluginTypeId===y?'<div id="LightBoxTextBox">'+e+'</div><div id="LightBoxText"></div>':t.featureSettings.pluginTypeId===w?'<div id="LightBoxImageBox">'+e+'</div><div id="LightBoxImage"></div>':t.featureSettings.pluginTypeId===C?'<div id="LightBoxTextBox">'+e+'</div><div id="LightBoxText"></div>':t.featureSettings.pluginTypeId===b?'<div id="LightBoxImageBox">'+e+'</div><div id="LightBoxImage"></div>':'<div id="BounceImageBox1">'+e+'</div><div id="BounceImageBlock1" style="display: block;"></div>'),null!=(d=n.featureSettings.pluginParameters)&&(d=JSON.parse(d),e=soclHelper.convertMS(d.TimeToShowAfterClose),o.setAttribute("daysToExpire",e.decimalDay)),soclHelper.setStoreValue("smpid_"+s,n.featureSettings.pluginId),setTimeout(function(){x("on",1)},7e3))})}):null===(e=JSON.parse(soclHelper.getStoreValue("smanonymous")))||""===e||n.cgActive||(e.Active?(e.Active=!1,soclHelper.setStoreValue("smanonymous",JSON.stringify(e)),soclHelper.removeSessionValue("controlGroupActive")):(soclHelper.removeStoreValue("smanonymous"),soclHelper.removeStoreValue(soclConnect.createSMIdKey(n.id))))})}Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var s,a,c,l,u,o,d,p=10,e=null,f={Type:{Channel_View:"Channel.LightBox.View",Channel_Conclusion:"Channel.LightBox.Conclusion",Channel_Rejection:"Channel.LightBox.Rejection",Channel_Suppression:"Channel.LightBox.Suppression",Channel_Step_View:"Channel.LightBox.Step.View",Channel_Step_Conclusion:"Channel.LightBox.Step.Conclusion",Channel_Step_Rejection:"Channel.LightBox.Step.Rejection",Channel_Step_ConclusionWithRejection:"Channel.LightBox.Step.ConclusionWithRejection",Channel_ConclusionWithRejection:"Channel.LightBox.ConclusionWithRejection"},Step:{Empty:"",OS_LightBox:"OS.LightBox.0",OS_LightBox_Email:"OS.LightBox.0.Email",OS_LightBox_FBConnect:"OS.LightBox.0.FBConnect"}},r=!1,g=0,m="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/client/{CID}/social/{PTID}/{PID}",h="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",v=1,S=10,I=11,y=12,w=13,C=14,b=15,H=0,E=7,P=1,O=!1,_=function(){(e=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-lightBox-iframe")).addEventListener(k)},k=function(e){var t,n;if("on"!=e.data.activeBounce||null!=(t=document.getElementById("sm-bounce"))&&B(t),"on"==e.data.closeAndRedirect&&soclHelper.getCloseUrl(function(e){if(""!==e){try{var t=[];for(t.push({type:f.Type.Channel_ConclusionWithRejection,step:f.Step.OS_LightBox,channelId:a}),i=0;i<t.length;i++)t[i].channelId&&soclHelper.createEvent(t[i])}catch(e){console.log(e)}soclBounce.closeBox(!1,"2"),window.location.href=e}else soclBounce.closeBox(!1,"2")}),"on"==e.data.close)if(null!==soclHelper.getSessionValue("controlGroupActive")&&""!==soclHelper.getSessionValue("controlGroupActive"))soclHelper.getCID(function(e){soclConnect.registerAnonymousUser(e,soclConnect.generateRndGuid(),!1,function(e){soclHelper.setStoreValue("smanonymous",JSON.stringify({IsControlGroup:!1,Active:e})),soclBounce.closeBox(!0,"1")})});else{try{(n={type:f.Type.Channel_Rejection,step:f.Step.OS_LightBox,channelId:a}).channelId&&soclHelper.createEvent(n)}catch(e){console.log(e)}soclBounce.closeBox(!1,"1")}if(void 0!==e.data.userConnected&&soclHelper.setStoreValue(e.data.userConnected,"connected"),void 0!==e.data.click&&(soclCookie.createCookie("smClickBounce",!0,3),soclHelper.setStoreValue("smInteractBounce_"+l,!0),socl.emmit.onClick({id:a,type:"bounce-1"})),"on"==e.data.concluded){soclHelper.getRedirectUrl(function(e){socl.emmit.onClick({id:a,type:"bounce-2"}),window.location.href=e});try{var o=[];for(o.push({type:f.Type.Channel_Conclusion,step:f.Step.OS_LightBox,channelId:a}),i=0;i<o.length;i++)o[i].channelId&&soclHelper.createEvent(o[i])}catch(e){console.log(e)}}if(void 0!==e.data.loaded&&x(e.data.loaded,1e3),void 0!==e.data.createEvent)try{(n=e.data.createEvent).channelId&&soclHelper.createEvent(n)}catch(e){console.log(e)}},x=function(n,e){g<e&&(g=e,e=[],"on"!==n&&e.push(encodeURIComponent(n)),r&&e.push(encodeURIComponent(document.location.href)),soclHelper.formatUrlBy(a,s,e,function(e){var t=0;"on"!==n&&soclHelper.setStoreValue("smredirecturl",e.url[t++]),r&&soclHelper.setStoreValue("smcloseurl",e.url[t++])}))},B=function(e){var r,t,n=soclHelper.getStoreValue("smViewBounce_"+l);!soclHelper.isMobile()&&d.DeviceType==E||(d.DeviceType==H||isNaN(d.DeviceType)||!isNaN(n)&&(n<d.PluginViewBefore||soclHelper.getStoreValue("smInteractBounce_"+l))?r=e.getAttribute("daysToExpire"):(r=soclHelper.convertMS(d.TimeToShowIfNoHaveInteraction).decimalDay,soclHelper.removeStoreValue("smViewBounce_"+l),soclHelper.removeStoreValue("smInteractBounce_"+l)),null==r&&(r=3),t=window.setInterval(function(){try{var o;"undefined"!=typeof soclOuibounce?(window.clearInterval(t),(o={}).create_date=soclHelper.getNow(),o.path=window.location.pathname,o.smid="4-10",u=soclOuibounce(e,{displayBounce:d.DisplayType!=P,sensitivity:20,cookieExpire:r,timer:500,delay:200,sitewide:!0,cookieName:"viewedOuibounceModal_"+l,callback:function(){if(document.getElementById("sm-bounce")){screen.height<600&&window.scrollTo(0,0),null!==document.getElementById("sm-onsite")&&document.getElementById("sm-onsite").SoclRemoveTag(),null!==document.getElementById("sm-push")&&"block"==window.getComputedStyle(document.getElementById("sm-push")).display&&(document.getElementById("sm-push").style.display="none",O=!0),soclHelper.computePluginHit(soclPerfCounter.type.View,s),isNaN(n)?soclHelper.setStoreValue("smViewBounce_"+l,1):(n+=1,soclHelper.setStoreValue("smViewBounce_"+l,n)),soclCookie.createCookie("smViewBounce",!0,r),o.kind="view";var e=soclHelper.addOrGetEvent(c,"sm_views",o);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(e));try{var t={type:f.Type.Channel_View,step:f.Step.OS_LightBox,channelId:a};t.channelId&&soclHelper.createEvent(t)}catch(e){console.log(e)}socl.emmit.onView({id:a,type:"bounce"})}else soclCookie.createCookie("viewedOuibounceModal_"+l,null,0)},onBeforeShow:function(){var e=!1;if(soclCookie.getCookie("smViewBounce"))e=!0;else if(soclHelper.isInSuppressionGroup(c,a)){soclCookie.createCookie("smViewBounce",!0,r),o.kind="suppression";var t=soclHelper.addOrGetEvent(c,"sm_views",o);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(t));try{e=!0;var n={type:f.Type.Channel_Suppression,step:f.Step.OS_LightBox,channelId:a};soclHelper.createEvent(n)}catch(e){console.log(e)}}return e}})):0==--p&&window.clearInterval(t)}catch(e){}},1e3),(soclHelper.isMobile()&&d.DeviceType==E&&soclHelper.getSessionValue("pagesview_"+a)>=d.PagesViewBefore||d.DisplayType==P&&soclHelper.getSessionValue("pagesview_"+a)>=d.PagesViewBefore)&&(0<d.ScrollPercentage&&document.addEventListener("scroll",A),0<d.TimeInSite&&(o=window.setTimeout(function(){soclCookie.getCookie("viewedOuibounceModal_"+l)||void 0===u||u.fire()},d.TimeInSite))))},A=function(e){soclCookie.getCookie("viewedOuibounceModal_"+l)||void 0===u||parseInt(soclHelper.getPosition())>=parseInt(d.ScrollPercentage)&&u.fire()};t.closeBox=function(e,t){var n;null!==document.getElementById("sm-bounce")&&(n="bounce","undefined"!=t&&null!=t&&""!=t&&(n+="-"+t),document.getElementById("sm-bounce").SoclRemoveTag(),e||(socl.emmit.onClose({id:a,type:n}),soclCookie.createCookie("smCloseBounce",!0,3),soclHelper.setStoreValue("smInteractBounce",!0)),O&&null!==document.getElementById("sm-push")&&"2"!=t&&(document.getElementById("sm-push").style.display="block",O=!1))},t.addKeydownEvent=function(){document.onkeydown=function(e){27==(e=e||window.event).keyCode&&t.closeBox(!1,"escape")}},t.render=function(e){navigator.cookieEnabled&&n(e)},t.createEventProxy=function(e){windowProxy.post({createEvent:e})},t.clearInstance=function(){e&&e.removeEventListener(k),o&&clearTimeout(o),u&&u.destroy(),document.removeEventListener("scroll",A),soclHelper.removeElementById("sm-bounce")}}(soclBounce)},function(e,t,n){(function(C){window.soclPush={},function(s){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var e=null,r=null,p={Ping_PushProfile:"Ping.PushProfile",Channel_View:"Channel.PushOptIn.View",Channel_Conclusion:"Channel.PushOptIn.Conclusion",Channel_Rejection:"Channel.PushOptIn.Rejection",Channel_Suppression:"Channel.PushOptIn.Suppression",Channel_Step_View:"Channel.PushOptIn.Step.View",Channel_Step_Conclusion:"Channel.PushOptIn.Step.Conclusion",Channel_Step_Rejection:"Channel.PushOptIn.Step.Rejection",Channel_ConclusionWithRejection:"Channel.PushOptIn.ConclusionWithRejection"},f={Empty:"",OS_Notification:"OS.Notification"};s.PUSH_TOKEN_VERIFIED={NAME:"smPushTokenVerified",VALUE:!0,DAYS_TO_EXPIRE:1/24};var n=1,i=1,a=2,g="smViewPushOptin",m="smClickPushOptin",h="smClosePushOptin";function c(e,t,n,o,r){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,isRefreshToken:r,deviceType:soclHelper.isMobile()?a:i}}function l(e,t,n){d=soclHelper.replaceAll("{DNS}",e.dns,d),d=soclHelper.replaceAll("{PID}",e.featureSettings.pluginId,d);var o=soclHelper.createBaseIframe();o.setAttribute("src",d+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId="+e.featureSettings.pluginId+"&version="+e.featureSettings.version+"&dns="+e.dns+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(d)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled+"&googleApp="+e.googleApp+"&clientId="+e.clientId+"&sessionHash="+e.sessionHash+soclHelper.getSMIDToIFrameSrc(e.id)),o.setAttribute("id","social-push"),o.setAttribute("class","socl-iframe"),o.setAttribute("name","social-push"),n.appendChild(o)}s.index_db_name="fcm_token_details_db";var u="",d="https://{DNS}.soclminer.com.br/{PID}/",v="https://{DNS}.soclminer.com.br/00000000000000000000000000000000/",S="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/",I="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",y=function(){(e=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-push")).addEventListener(w)},w=function(e){var t,n,o=document.getElementById("sm-push")||document.getElementById("sm-push-tracking");if(null!==o){if(void 0!==e.data.hasOptin&&(a=e.data.customerId,t=e.data.endpoint,soclConnect.getId(a,function(e){0===e&&soclTracking.setSMIdByPushOrganic(a,t,function(e){}),soclHelper.setStoreValue("smpushoptin_"+a,"true")})),void 0!==e.data.show){var r,i=(r=e.data.show.split("|"))[0],s=r[1],a=r[2],c=r[3];o.setAttribute("class","socl-"+s);var l=soclCookie.getCookie(g),s=soclCookie.getCookie(h);if(!l&&!s){l={};l.create_date=soclHelper.getNow(),l.path=window.location.pathname;s=appConfig.IsMobile()?"17":"18";if(l.smid="8-".concat(s),soclHelper.isInSuppressionGroup(a,c)){soclCookie.createCookie(g,!0,i),l.kind="suppression";try{var u={type:p.Channel_Suppression,step:f.OS_Notification,channelId:c};soclHelper.createEvent(u)}catch(e){console.log(e)}}else{o.style.display="",soclPerfCounter.event(c,soclPerfCounter.type.Impression,5,a),soclCookie.createCookie(g,!0,i),socl.emmit.onView({id:c,type:"push-optin"}),l.kind="view";try{(u={type:p.Channel_View,step:f.OS_Notification,channelId:c}).channelId&&soclHelper.createEvent(u)}catch(e){console.log(e)}}l=soclHelper.addOrGetEvent(a,"sm_views",l);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(l))}}if(void 0!==e.data.close){var d=e.data.close,c=e.data.pluginId;soclCookie.createCookie(h,!0,d),socl.emmit.onClose({id:c,type:"push-optin"}),soclPush.closeMessage();try{(u={type:p.Channel_Rejection,step:f.OS_Notification,channelId:c}).channelId&&soclHelper.createEvent(u)}catch(e){console.log(e)}}if(void 0!==e.data.click){d=e.data.click,c=e.data.pluginId;soclCookie.createCookie(h,!0,d),soclCookie.createCookie(m,!0,d),socl.emmit.onClick({id:c,type:"push-optin"}),soclPush.closeMessage();try{(u={type:p.Channel_Step_Conclusion,step:f.OS_Notification,channelId:c}).channelId&&soclHelper.createEvent(u)}catch(e){console.log(e)}}if(void 0!==e.data.closeBounce&&soclPush.closeBounceMessage(),void 0!==e.data.closeOnsite&&soclPush.closeOnSiteMessage(),void 0!==e.data.identifier&&(a=(r=e.data.identifier.split("|"))[0],n=r[1],soclConnect.getId(a,function(e){e!==n&&soclHelper.setStoreValue(soclConnect.createSMIdKey(a),n)})),void 0!==e.data.createEvent)try{((u=e.data.createEvent).channelId||u.byPassChannel)&&soclHelper.createEvent(u)}catch(e){console.log(e)}}};s.createPushTrackingIFrame=function(e,t,n){v=soclHelper.replaceAll("{DNS}",e.dns,v),(r=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-push-tracking")).addEventListener(w);var o=soclHelper.createBaseIframe();o.setAttribute("src",v+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId=00000000000000000000000000000000&version=0&dns="+e.dns+"&url="+encodeURIComponent(document.location.href)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled+"&googleApp="+e.googleApp),o.setAttribute("id","social-push-tracking"),o.setAttribute("class","socl-iframe"),o.setAttribute("name","social-push-tracking"),n.appendChild(o)},s.checkIfUserHaveSubscription=function(e,t){try{e.googleApp&&e.googleApp===n?s.checkIfUserHaveSubscriptionInGCM(e,function(e){t(!1)}):s.checkIfUserHaveSubscriptionInFirebase(e,function(e){t(e)})}catch(e){console.log(e)}},s.checkIfUserHaveSubscriptionInFirebase=function(e,t){try{if(null==document.getElementById("pushOptIn"))return t(!0);s.checkPushToken(e,function(e){t(e)})}catch(e){console.log(e),t(!1)}},s.checkIfUserHaveSubscriptionInGCM=function(n,o){try{null!=document.getElementById("pushOptIn")&&window.isSecureContext?"permissions"in navigator&&navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){"granted"===e.state&&"serviceWorker"in navigator?((e=document.createElement("link")).setAttribute("href",window.location.origin+"/manifest/chrome/manifest.json"),e.setAttribute("rel","manifest"),document.head.appendChild(e),navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(t){soclHelper.getPushEndpoint(function(e){e!==t.endpoint?soclConnect.getId(n.customerId,function(e){soclConnect.updateConnectedUser(c(e,n.customerId,t.endpoint,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",t.endpoint),soclHelper.setStoreValue("smpushoptin_"+n.customerId,"true")}),o(!0)}):o(!0),"true"!==n.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:n.customerId,endpoint:t.endpoint})})})})):o(!1)}):o(!1)}catch(e){console.log(e)}},s.checkPushToken=function(t,n){soclHelper.initFirebase(function(e){return e?void s.verifyToken(t,function(e){return n(e)}):n(!0)})},s.verifyToken=function(e,t){if("granted"!==Notification.permission)return t(!1);s.getToken(e,function(e){return t(e)})},s.getToken=function(o,t){if("granted"!==Notification.permission){var r=soclHelper.getStoreValue(soclConnect.createSMIdKey(o.customerId));return r&&!soclCookie.getCookie(s.PUSH_TOKEN_VERIFIED.NAME)&&(soclHelper.setCookie(s.PUSH_TOKEN_VERIFIED.NAME,s.PUSH_TOKEN_VERIFIED.VALUE,365),soclHelper.getPushEndpoint(function(e){try{var t=soclHelper.getOrCreateSMObj(o.customerId),n={token:"",oldToken:e||"",pushPermission:Notification.permission},n={type:p.Ping_PushProfile,step:f.Empty,clientId:t.clientId,customerId:o.customerId,personId:r,channelId:null,additionalData:JSON.stringify(n),byPassChannel:!0};windowProxy&&windowProxy.post({createEvent:n})}catch(e){console.log(e)}})),t(!1)}(u=firebase.messaging()).onTokenRefresh(function(){s.getToken(o,function(e){return t(!0)})}),u.onMessage(function(e){}),soclConnect.getId(o.customerId,function(e){windowProxy.post({identifier:o.customerId+"|"+e});var t=soclHelper.createBaseIframe();t.setAttribute("src",S+"pixel.min.html?id="+o.customerId+"&smid="+e),t.setAttribute("id","social-push-pixel"),t.setAttribute("name","social-push-pixel"),document.body.insertBefore(t,document.body.childNodes[0])}),soclHelper.getPushEndpoint(function(e){e&&-1<e.indexOf("http")&&navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){e&&soclPush.compareToken(e.endpoint,o)}).catch(function(e){C("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while calling getSubscription() to check push opt in"},e)})})}),u.getToken().then(function(e){e&&(soclPush.compareToken(e,o),t(!0))}).catch(function(e){console.log("Error while trying generate new token. Err:",e),t(!1)})},s.compareToken=function(r,i){soclHelper.getPushEndpoint(function(o){i.isRefreshToken=!(-1<o.indexOf("http")&&-1===r.indexOf("http")),soclConnect.getId(i.customerId,function(e){if(!soclCookie.getCookie(s.PUSH_TOKEN_VERIFIED.NAME)){soclHelper.setCookie(s.PUSH_TOKEN_VERIFIED.NAME,s.PUSH_TOKEN_VERIFIED.VALUE,s.PUSH_TOKEN_VERIFIED.DAYS_TO_EXPIRE);try{var t=soclHelper.getOrCreateSMObj(i.customerId),n={token:r||"",oldToken:o||"",pushPermission:Notification.permission},n={type:p.Ping_PushProfile,step:f.Empty,clientId:t.clientId,customerId:i.customerId,personId:e,channelId:null,additionalData:JSON.stringify(n),byPassChannel:!0};windowProxy&&windowProxy.post({createEvent:n})}catch(e){console.log(e)}}o!==r&&soclConnect.updateConnectedUser(c(e,i.customerId,r,!0,i.isRefreshToken),function(e){soclHelper.setStoreValue("pushendpoint",r),soclHelper.setStoreValue("smpushoptin_"+i.customerId,"true")})})})},s.updateUser=function(t,n){soclConnect.getId(t.customerId,function(e){soclConnect.updateConnectedUser(c(e,t.customerId,n,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",n),soclHelper.setStoreValue("smpushoptin_"+t.customerId,"true")})}),"true"!==t.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:t.customerId,endpoint:n})},s.popupInitializer=function(o){soclHelper.getPushEndpoint(function(e){var t;""===e?(t=function(e){var n;e&&(e=soclHelper.getQueryStringParams("userId"),n=soclHelper.getSMIDToIFrameSrc(o.customerId,e),$("#btClose").click(function(){windowProxy.post({close:o.daysToShowAfterClose,pluginId:o.pluginId})}),$("#btGo").click(function(){windowProxy.post({closeBounce:!0});var e=screen.width/2-525,t=screen.height/2-180;window.open(o.path+"popup.min.html?id="+o.customerId+"&name="+encodeURIComponent(o.name)+"&pluginId="+o.pluginId+"&url="+o.url+"&isMobile="+o.isMobile+"&googleApp="+o.googleApp+"&path="+encodeURIComponent(o.path)+"&version="+o.version+n,"pushPermission","width=1050,height=440,top="+t+",left="+e+";"),windowProxy.post({click:o.daysToShowAfterClose,pluginId:o.pluginId})}),windowProxy&&windowProxy.post({show:o.daysToShowAfterView+"|"+o.orientation+"|"+o.customerId+"|"+o.pluginId}))},("desktop"===(e=o.device)&&!appConfig.IsMobile()||"mobile"===e&&appConfig.IsMobile()||"all"===e)&&appConfig.IsChrome()?soclPushEngineAlfajor.supportPush(function(e){t(!0)}):t(!1)):soclConnect.getId(o.customerId,function(e){windowProxy.post({identifier:o.customerId+"|"+e});var t=soclHelper.createBaseIframe();t.setAttribute("src",S+"pixel.min.html?id="+o.customerId+"&smid="+e),t.setAttribute("id","social-push-pixel"),t.setAttribute("name","social-push-pixel"),document.body.insertBefore(t,document.body.childNodes[0])})})},s.closeMessage=function(){document.getElementById("sm-push").style.display="none"},s.closeBounceMessage=function(){null!==document.getElementById("sm-bounce")&&document.getElementById("sm-bounce").SoclRemoveTag()},s.closeOnSiteMessage=function(){null!==document.getElementById("sm-onsite-sales")&&document.getElementById("sm-onsite-sales").SoclRemoveTag()},s.render=function(n){var o;navigator.cookieEnabled&&(soclHelper.injectDiv("sm-push","none"),o=document.getElementById("sm-push"),soclHelper.hasPushOptInBy(n.id,function(t){"true"!==t?function(t){soclHelper.injectCSS(I,"push.min.css");try{y(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){e&&l(n,t,o)}):l(n,t,o),soclHelper.setStoreValue("smpid_5",n.featureSettings.pluginId)}))},s.createEventProxy=function(e){window.opener.windowProxy.post({createEvent:e})},s.clearInstance=function(){e&&e.removeEventListener(w),r&&r.removeEventListener(w),soclHelper.removeElementById("sm-push"),soclHelper.removeElementById("sm-push-tracking")}}(soclPush)}).call(this,n(0).JL)},function(e,t,n){(function(p){window.soclPushEngineAlfajor={},function(e){function o(e,t){document.body.classList.remove(t),document.body.classList.add(e),window.smStepIntercept&&window.smStepIntercept(e,t)}function r(){return soclHelper.getQueryStringParams("isMobile")&&"true"===soclHelper.getQueryStringParams("isMobile")?d:u}function i(){soclHelper.getQueryStringParams("isMobile")&&"true"===soclHelper.getQueryStringParams("isMobile")?window.location.href=decodeURIComponent(soclHelper.getQueryStringParams("url")):window.close()}function s(e,t,n,o){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,deviceType:r()}}function t(e){switch(o("stp2","stp1"),e.state){case"denied":soclHelper.getCID(function(n){0!==n?soclConnect.getId(n,function(t){0!==t?soclHelper.getPushEndpoint(function(e){""!==e?soclConnect.updateConnectedUser(s(t,n,e,!1),function(e){soclHelper.removeStoreValue("pushendpoint"),i()}):i()}):i()}):i()});break;case"granted":o("stp4","stp2");break;case"prompt":i()}}function n(n){o("stp2","stp1"),soclHelper.getCID(function(t){0!==t?soclConnect.getId(t,function(e){0===e?soclConnect.signInWithPush(t,11,n.endpoint,r(),function(e){soclHelper.setStoreValue("pushendpoint",n.endpoint),o("stp3","stp2")}):soclConnect.updateConnectedUser(s(e,t,n.endpoint,!0),function(e){soclHelper.setStoreValue("pushendpoint",n.endpoint),o("stp4","stp2")}),soclHelper.getStoreValue("sm_native")||soclPerfCounter.event(soclHelper.getQueryStringParams("pluginId"),soclPerfCounter.type.Click,l,soclHelper.getQueryStringParams("id"))}):(o("stp4","stp2"),p("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Missing CID parameter'"}))})}function a(){navigator.serviceWorker.ready.then(function(e){e.pushManager.subscribe({userVisibleOnly:!0}).then(n).catch(function(e){"permissions"in navigator?navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){p("ajaxAppender").fatal({msg:"Exception",errorMsg:"subscribeDevice() Error: Push permission state = "+e}),t(e)}).catch(function(e){p("ajaxAppender").fatalException({msg:"Exception",errorMsg:"Push Error to register"},e)}):"denied"===Notification.permission?p("ajaxAppender").fatal({msg:"Exception",errorMsg:"subscribeDevice() Denied Error: "+e.message}):p("ajaxAppender").fatal({msg:"Exception",errorMsg:"Push Error to register = "+e.message})})})}function c(t){navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){e?(soclHelper.setStoreValue("pushendpoint",e.endpoint),t(!0)):t(!1)}).catch(function(e){p("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while calling getSubscription() to check push opt in"},e)})})}var l=4,u=1,d=2;e.hasPermission=function(t){c(function(e){t(e)})},e.setDisplay=function(){soclConnect.getFbId(function(e){o(0===e?"stp3":"stp4","stp1")})},e.initialiseState=function(e){l=void 0===e?4:e,c(function(e){e?soclConnect.getFbId(function(e){o(0===e?"stp3":"stp4","stp1")}):"permissions"in navigator?navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){"denied"===e.state?t(e):a()}).catch(function(e){p("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while get push permission"},e)}):"denied"===Notification.permission?(o("stp4","stp1"),p("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Permission Denied'"})):"default"===Notification.permission?(o("stp4","stp1"),p("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Permission Default'"})):a()})},e.supportPush=function(e){"PushManager"in window?e(!0):e(!1)}}(soclPushEngineAlfajor)}).call(this,n(0).JL)},function(e,t,n){n(14),n(0),n(15),n(16),n(17),n(1),n(8),n(9),n(2),n(3),n(18),n(4),n(5),n(10),n(19),n(11),n(20),n(21),n(12),n(6),n(7),n(22),n(23),e.exports=n(24)},function(e,t){window.socl_BlackList=["d29496c2-6137-4af7-9038-dbb5e388888a","c5b75f33-6671-4a13-ba6f-ef4755dc50d7","400f2d5f-5017-4303-8762-56ce506bdb1d","3f17483b-b519-4ccf-a8d9-6395d28f9793","815cff49-77e6-4424-9634-08b0e9da3be5","4a9c872c-0aa2-4d81-b1d6-7ca4b2f5b9a7","d40f44d3-5421-4dc2-b05a-cfc405107d9e","563daf73-db67-41dc-aa1b-98fbde0837c9","7149f1f9-7c0a-44b1-9ca2-f0c825d604ae","1f72e212-c76f-4c5a-96f4-7b106378c22b","d30374dd-56c6-4dfb-ab2b-1a054571486b","cc0e1b6c-7256-4583-aac1-c70f6b09209c","397344b2-d292-4355-bdac-00b0cb06bbb5","97255aea-1a9c-4f10-bdec-29b5956274ca","be774d94-fb32-4376-9cbe-995915abd6aa","47c3baec-611c-4b66-8bd6-c9b4ebf5bb04","16b84471-64f8-427e-b2ec-d67101f4d36e","e2f1fcb0-e624-4c79-a55f-9992b46fe8cf","888dd016-e588-40ea-97aa-cc94a9af7fa0","0eac4e5d-23d9-4bb1-a54f-507d597dac88","40ff4d0d-7b5f-4130-ba42-6b3b6a5c465d","6a552d5a-2bbb-49bb-89b1-b0efacb608c6","7f7c1c54-67e1-4a65-a654-069d7cc2db8e"],window.socl_BlackListDNS=["kaabumofc.com.br"]},function(e,t){var w;window.localStorageDB=function(e,t){var n="db_"+e,o=!1,g=null;try{var r=t==sessionStorage?sessionStorage:localStorage}catch(e){r=t}function i(e){return!!g.tables[e]}function a(e){i(e)||h("The table '"+e+"' does not exist")}function l(e,t,n){if(g.tables[e].fields=g.tables[e].fields.concat(t),void 0!==n)for(var o in g.data[e])if(g.data[e].hasOwnProperty(o))for(var r in t)g.data[e][o][t[r]]="object"==typeof n?n[t[r]]:n}function s(e,t){return t.ID=g.tables[e].auto_increment,g.data[e][g.tables[e].auto_increment]=t,g.tables[e].auto_increment++,t.ID}function c(e,t,n,o,r,i){for(var s,a,c=[],l=0;l<t.length;l++)s=t[l],a=g.data[e][s],c.push(v(a));if(r&&r instanceof Array)for(l=0;l<r.length;l++)c.sort(function(n,o){return function(e,t){e="string"==typeof e[n]?e[n].toLowerCase():e[n],t="string"==typeof t[n]?t[n].toLowerCase():t[n];return"DESC"===o?e==t?0:e<t?1:-1:e==t?0:t<e?1:-1}}(r[l][0],1<r[l].length?r[l][1]:null));if(i&&i instanceof Array){for(var u=0;u<i.length;u++)for(var d={},p=i[u],l=0;l<c.length;l++)c[l]!==w&&(c[l].hasOwnProperty(p)&&d.hasOwnProperty(c[l][p])?delete c[l]:d[c[l][p]]=1);for(var f=[],l=0;l<c.length;l++)c[l]!==w&&f.push(c[l]);c=f}return o=o&&"number"==typeof o?o:null,(n=n&&"number"==typeof n?n:null)&&o?c=c.slice(n,n+o):n?c=c.slice(n):o&&(c=c.slice(n,o)),c}function u(e,t){var n,o=[],r=!1,i=null;for(n in g.data[e])if(g.data[e].hasOwnProperty(n)){for(var s in i=g.data[e][n],r=!0,t)if(t.hasOwnProperty(s))if("string"==typeof t[s]){if(i[s].toString().toLowerCase()!=t[s].toString().toLowerCase()){r=!1;break}}else if(i[s]!=t[s]){r=!1;break}r&&o.push(n)}return o}function d(e,t){var n,o=[];for(n in g.data[e])g.data[e].hasOwnProperty(n)&&1==t(v(g.data[e][n]))&&o.push(n);return o}function p(e){var t,n=[];for(t in g.data[e])g.data[e].hasOwnProperty(t)&&n.push(t);return n}function f(e,t,n){for(var o,r=0,i=0;i<t.length;i++){o=t[i];var s=n(v(g.data[e][o]));if(s){delete s.ID;var a,c=g.data[e][o];for(a in s)s.hasOwnProperty(a)&&(c[a]=s[a]);g.data[e][o]=I(e,c),r++}}return r}function m(){try{return r.setItem(n,JSON.stringify(g)),!0}catch(e){return!1}}function h(e){throw new Error(e)}function v(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function S(e){return!e.toString().match(/[^a-z_0-9]/gi)}function I(e,t){for(var n,o={},r=0;r<g.tables[e].fields.length;r++)t[n=g.tables[e].fields[r]]!==w&&(o[n]=t[n]);return o}function y(e,t){for(var n,o={},r=0;r<g.tables[e].fields.length;r++)o[n=g.tables[e].fields[r]]=null===t[n]||t[n]===w?null:t[n];return o}return(g=(g=r[n])&&JSON.parse(g.replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"')))&&g.tables&&g.data||(S(e)?(g={tables:{},data:{}},m(),o=!0):h("The name '"+e+"' contains invalid characters")),{commit:m,isNew:function(){return o},drop:function(){r.hasOwnProperty(n)&&delete r[n],g=null},serialize:function(){return JSON.stringify(g)},tableExists:i,tableFields:function(e){return e=e,g.tables[e].fields},tableCount:function(){var e,t=0;for(e in g.tables)g.tables.hasOwnProperty(e)&&t++;return t},columnExists:function(e,t){var n,o=!1,r=g.tables[e].fields;for(n in r)if(r[n]==t){o=!0;break}return o},createTable:function(e,t){var n,o,r=!1;if(S(e))if(this.tableExists(e))h("The table name '"+e+"' already exists.");else{for(var i=!0,s=0;s<t.length;s++)if(!S(t[s])){i=!1;break}if(i){for(var a,c={},s=0;s<t.length;s++)c[t[s]]=!0;for(a in delete c.ID,t=["ID"],c)c.hasOwnProperty(a)&&t.push(a);n=e,o=t,g.tables[n]={fields:o,auto_increment:1},g.data[n]={},r=!0}else h("One or more field names in the table definition contains invalid characters")}else h("The database name '"+e+"' contains invalid characters.");return r},createTableWithData:function(e,t){("object"!=typeof t||!t.length||t.length<1)&&h("Data supplied isn't in object form. Example: [{k:v,k:v},{k:v,k:v} ..]");var n=Object.keys(t[0]);if(this.createTable(e,n)){this.commit();for(var o=0;o<t.length;o++)s(e,t[o])||h("Failed to insert record: ["+JSON.stringify(t[o])+"]");this.commit()}return!0},dropTable:function(e){a(e),e=e,delete g.tables[e],delete g.data[e]},truncate:function(e){a(e),e=e,g.tables[e].auto_increment=1,g.data[e]={}},alterTable:function(e,t,n){var o,r=!1;if(S(e))if("object"==typeof t){for(var i=!0,s=0;s<t.length;s++)if(!S(t[s])){i=!1;break}if(i){for(var a,c={},s=0;s<t.length;s++)c[t[s]]=!0;for(a in delete c.ID,t=[],c)c.hasOwnProperty(a)&&t.push(a);l(e,t,n),r=!0}else h("One or more field names in the table definition contains invalid characters")}else"string"==typeof t&&(S(t)?((o=[]).push(t),l(e,o,n),r=!0):h("One or more field names in the table definition contains invalid characters"));else h("The database name '"+e+"' contains invalid characters");return r},rowCount:function(e){return a(e),function(e){var t,n=0;for(t in g.data[e])g.data[e].hasOwnProperty(t)&&n++;return n}(e)},insert:function(e,t){return a(e),s(e,y(e,t))},insertOrUpdate:function(e,t,n){a(e);var o=[];if(t?"object"==typeof t?o=u(e,I(e,t)):"function"==typeof t&&(o=d(e,t)):o=p(e),0==o.length)return s(e,y(e,n));for(var r=[],i=0;i<o.length;i++)f(e,o,function(e){return r.push(e.ID),n});return r},update:function(e,t,n){a(e);var o=[];return t?"object"==typeof t?o=u(e,I(e,t)):"function"==typeof t&&(o=d(e,t)):o=p(e),f(e,o,n)},query:function(e,t,n,o,r,i){a(e);var s=[];return t?"object"==typeof t?s=u(e,I(e,t)):"function"==typeof t&&(s=d(e,t)):s=p(e),c(e,s,o,n,r,i)},queryAll:function(e,t){return t?this.query(e,t.hasOwnProperty("query")?t.query:null,t.hasOwnProperty("limit")?t.limit:null,t.hasOwnProperty("start")?t.start:null,t.hasOwnProperty("sort")?t.sort:null,t.hasOwnProperty("distinct")?t.distinct:null):this.query(e)},deleteRows:function(e,t){a(e);var n=[];return t?"object"==typeof t?n=u(e,I(e,t)):"function"==typeof t&&(n=d(e,t)):n=p(e),function(e,t){for(var n=0;n<t.length;n++)g.data[e].hasOwnProperty(t[n])&&delete g.data[e][t[n]];return t.length}(e,n)}}}},function(e,t){!function(o){"use strict";var s,r,i,e;o&&function(){var n,e=o.crypto||o.msCrypto;if(!s&&e&&e.getRandomValues)try{var t=new Uint8Array(16);i=s=function(){return e.getRandomValues(t),t},s()}catch(e){}s||(n=new Array(16),r=s=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()"))}();for(var a="function"==typeof Buffer?Buffer:Array,n=[],c={},t=0;t<256;t++)n[t]=(t+256).toString(16).substr(1),c[n[t]]=t;function u(e,t){t=t||0;return n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]}var l=s(),d=[1|l[0],l[1],l[2],l[3],l[4],l[5]],p=16383&(l[6]<<8|l[7]),f=0,g=0;function m(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new a(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var i=0;i<16;i++)t[o+i]=r[i];return t||u(r)}var h=m;h.v1=function(e,t,n){var o=t&&n||0,r=t||[],i=null!=(e=e||{}).clockseq?e.clockseq:p,s=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:g+1;if((n=s-f+(a-g)/1e4)<0&&null==e.clockseq&&(i=i+1&16383),1e4<=(a=(n<0||f<s)&&null==e.nsecs?0:a))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=s,p=i,a=(1e4*(268435455&(s+=122192928e5))+(g=a))%4294967296,r[o++]=a>>>24&255,r[o++]=a>>>16&255,r[o++]=a>>>8&255,r[o++]=255&a,s=s/4294967296*1e4&268435455,r[o++]=s>>>8&255,r[o++]=255&s,r[o++]=s>>>24&15|16,r[o++]=s>>>16&255,r[o++]=i>>>8|128,r[o++]=255&i;for(var c=e.node||d,l=0;l<6;l++)r[o+l]=c[l];return t||u(r)},h.v4=m,h.parse=function(e,t,n){var o=t&&n||0,r=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){r<16&&(t[o+r++]=c[e])});r<16;)t[o+r++]=0;return t},h.unparse=u,h.BufferClass=a,h._rng=s,h._mathRNG=r,h._nodeRNG=void 0,h._whatwgRNG=i,e=o.uuid,h.noConflict=function(){return o.uuid=e,h},o.uuid=h}("undefined"!=typeof window?window:null)},function(e,t){!function(i,s){var a,c=this,l=256,u=6,d="random",p=s.pow(l,u),f=s.pow(2,52),g=2*f,m=l-1;function h(e){var t,n=e.length,s=this,o=0,r=s.i=s.j=0,i=s.S=[];for(n||(e=[n++]);o<l;)i[o]=o++;for(o=0;o<l;o++)i[o]=i[r=m&r+e[o%n]+(t=i[o])],i[r]=t;(s.g=function(e){for(var t,n=0,o=s.i,r=s.j,i=s.S;e--;)t=i[o=m&o+1],n=n*l+i[m&(i[o]=i[r=m&r+t])+(i[r]=t)];return s.i=o,s.j=r,n})(l)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function S(e,t){for(var n,o=e+"",r=0;r<o.length;)t[m&r]=m&(n^=19*t[m&r])+o.charCodeAt(r++);return I(t)}function I(e){return String.fromCharCode.apply(0,e)}s["seed"+d]=function(e,t,n){var o=[],e=S(function e(t,n){var o,r=[],i=typeof t;if(n&&"object"==i)for(o in t)try{r.push(e(t[o],n-1))}catch(e){}return r.length?r:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,I(i)]:null==e?function(){try{if(a)return I(a.randomBytes(l));var e=new Uint8Array(l);return(c.crypto||c.msCrypto).getRandomValues(e),I(e)}catch(e){var t=c.navigator,t=t&&t.plugins;return[+new Date,c,t,c.screen,I(i)]}}():e,3),o),r=new h(o);return(o=function(){for(var e=r.g(u),t=p,n=0;e<f;)e=(e+n)*l,t*=l,n=r.g(1);for(;g<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t}).int32=function(){return 0|r.g(4)},o.quick=function(){return r.g(4)/4294967296},o.double=o,S(I(r.S),i),(t.pass||n||function(e,t,n,o){return o&&(o.S&&v(o,r),e.state=function(){return v(r,{})}),n?(s[d]=e,t):e})(o,e,"global"in t?t.global:this==s,t.state)},S(s.random(),i)}([],Math)},function(e,t,n){(function(e){var t,n,o;window.soclError={},t=soclError,n=e.createAjaxAppender("ajaxAppender"),o="",o="https://"+(o=soclHelper?soclHelper.getEnvironment():o)+"api.soclminer.com.br/v2.1/client/error",n.setOptions({bufferSize:3,storeInBufferLevel:e.getErrorLevel(),level:e.getFatalLevel(),sendWithBufferLevel:e.getFatalLevel(),url:o}),window.onerror=function(e,t,n,o,r){return!1},t.setAppender=function(){e().setOptions({appenders:[n]})},soclError.setAppender()}).call(this,n(0).JL)},function(e,t,n){(function(e){window.firebaseMessaging={},function(r){var c={Ping:"Ping.PushProfile",Channel_View:"Channel.PushNotificationMessage.View",Channel_Conclusion:"Channel.PushNotificationMessage.Conclusion",Channel_Rejection:"Channel.PushNotificationMessage.Rejection",Channel_Step_View:"Channel.PushNotificationMessage.Step.View",Channel_Step_Conclusion:"Channel.PushNotificationMessage.Step.Conclusion",Channel_Step_AlreadyConnected:"Channel.PushNotificationMessage.Step.AlreadyConnected",Channel_Step_Rejection:"Channel.PushNotificationMessage.Step.Rejection",Channel_Step_Block:"Channel.PushNotificationMessage.Step.Block",Channel_ConclusionWithRejection:"Channel.PushNotificationMessage.ConclusionWithRejection",Channel_Step_Error:"Channel.PushNotificationMessage.Step.Error"},l={Empty:"",OS_Notification:"OS.Notification",OS_Notification_Popup:"OS.Notification.Popup",OS_Notification_Popup_Policy:"OS.Notification.Popup.Policy",OS_Notification_Popup_PoweredBy:"OS.Notification.Popup.PoweredBy",OS_Notification_Popup_Dialog:"OS.Notification.Popup.Dialog"};r.start=function(e,t){if(!window.isSecureContext)return t(!1);soclHelper.initFirebase(function(e){return t(e)})},r.onMessage=function(e){},r.onTokenRefresh=function(e){e.onTokenRefresh(function(){e.getToken().then(function(e){console.log("Token refreshed. New token: "+e),soclConnect.getId(metadata.customerId,function(e){soclConnect.updateConnectedUser(u(e,metadata.customerId,currentToken,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",currentToken),soclHelper.setStoreValue("smpushoptin_"+metadata.customerId,"true")})}),"true"!==metadata.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:metadata.customerId,endpoint:currentToken})}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})})},r.getToken=function(e,n,o){e.getToken().then(function(t){console.log("currentToken",t),t?(soclHelper.getPushEndpoint(function(e){e!==t&&soclConnect.getId(n.customerId,function(e){soclConnect.updateConnectedUser(u(e,n.customerId,t,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",t),soclHelper.setStoreValue("smpushoptin_"+n.customerId,"true")})}),"true"!==n.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:n.customerId,endpoint:t})}),o(!0)):o(!1)}).catch(function(e){console.log("An error occurred while retrieving token. ",e),o(!1)})};var u=function(e,t,n,o,r){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,deviceType:r}};r.organicPushPermission=function(o){var e;soclHelper.getStoreValue("pushendpoint")||firebase&&(e=firebase.messaging(),soclHelper.getCID(function(n){e.getToken().then(function(t){var e;0!==n&&(e=d(),soclConnect.signInWithPush(n,11,t,e,function(e){soclHelper.setStoreValue("pushendpoint",t),o(!0,e)}))})})),o(!1,0)};var d=function(){var e=1;return e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?2:e},t=null,p=0;r.requestPermission=function(n,o){soclHelper.initFirebase(function(e){return e?(p=d(),t=firebase.messaging(),soclPerfCounter.event(n.pluginId,soclPerfCounter.type.View,5,n.customerId),setTimeout(function(){try{var e={type:c.Channel_Step_View,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId};e.channelId&&soclPush.createEventProxy(e)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}$(".policy a").click(function(){try{var e={type:c.Channel_Step_Conclusion,step:l.OS_Notification_Popup_Policy,channelId:n.pluginId};e.channelId&&soclPush.createEventProxy(e)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}}),$("#poweredBy").click(function(){try{var e={type:c.Channel_Step_Conclusion,step:l.OS_Notification_Popup_PoweredBy,channelId:n.pluginId};e.channelId&&soclPush.createEventProxy(e)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}})},1e3),null!==document.getElementById("sm-bounce")&&document.getElementById("sm-bounce").SoclRemoveTag(),soclCookie.createCookie("smViewPushOptin",!0,n.daysToShowAfterView),void Notification.requestPermission().then(function(e){switch(e){case"granted":r.permissionGranted(n.pluginId,n.customerId,function(e){return o(e)});break;case"denied":r.permissionDenied(n.pluginId);break;case"default":r.permissionDefault(n.pluginId);break;default:try{var t=[];for(t.push({type:c.Channel_Step_Error,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:n.pluginId}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()}}).catch(function(e){try{var t=[];for(e&&e.code&&e.code.includes("block")?t.push({type:c.Channel_Step_Block,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId}):t.push({type:c.Channel_Step_Rejection,step:l.OS_Notification_Popup_Dialog,channelId:n.pluginId}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:n.pluginId}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){console.log("SM - Failed on sending rejection event to engage",e),window.opener.console.log("SM - Failed on sending rejection event to engage",e)}window.close(),window.close()})):o(!1)})},r.permissionGranted=function(r,s,a){p=p||d(),(t=t||firebase.messaging()).getToken().then(function(o){soclHelper.setCookie(soclPush.PUSH_TOKEN_VERIFIED.NAME,soclPush.PUSH_TOKEN_VERIFIED.VALUE,soclPush.PUSH_TOKEN_VERIFIED.DAYS_TO_EXPIRE),soclHelper.getCID(function(n){0!==n?soclConnect.getId(n,function(e){if(0===e){soclConnect.signInWithPush(n,11,o,p,function(e){soclHelper.setStoreValue("pushendpoint",o)},r);try{var t=[{type:c.Channel_Step_Conclusion,step:l.OS_Notification_Popup_Dialog,channelId:r}];for(i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}}else{soclConnect.updateConnectedUser(u(e,n,o,!0,p),function(e){soclHelper.setStoreValue("pushendpoint",o)});try{t=[{type:c.Channel_Step_AlreadyConnected,step:l.OS_Notification_Popup_Dialog,channelId:r}];for(i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending AlreadyConnected Event to Engage",e),console.log("SM - Failed on sending AlreadyConnected Event to Engage",e)}}soclPerfCounter.event(r,soclPerfCounter.type.Click,5,s),$("#btnSave").click(function(e){try{var t=[];for($("input[type = 'email']").val()?t.push({type:c.Channel_Conclusion,step:l.OS_Notification,channelId:r}):t.push({type:c.Channel_ConclusionWithRejection,step:l.OS_Notification,channelId:r}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending conclusion event to engage",e),console.log("SM - Failed on sending conclusion event to engage",e)}});try{a(!0)}catch(e){window.opener.console.log("SM - Get Token Callback Error",e),console.log("SM - Get Token Callback Error",e),window.close(),window.close()}}):(e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Missing CID parameter'"}),window.close(),window.close())})}).catch(function(e){console.log("SM - An error occurred while retrieving token. ",e),window.opener.console.log("SM - An error occurred while retrieving token. ",e),soclPushEngineAlfajor.setDisplay("stp4","stp1");try{var t={type:c.Channel_Step_Error,step:l.OS_Notification_Popup_Dialog,channelId:r};t.channelId&&soclPush.createEventProxy(t)}catch(e){window.opener.console.log(e),console.log(e)}window.close(),window.close()})},r.permissionDenied=function(e){try{var t=[];for(t.push({type:c.Channel_Step_Block,step:l.OS_Notification_Popup_Dialog,channelId:e}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:e}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()},r.permissionDefault=function(e){try{var t=[];for(t.push({type:c.Channel_Step_Rejection,step:l.OS_Notification_Popup_Dialog,channelId:e}),t.push({type:c.Channel_Rejection,step:l.OS_Notification,channelId:e}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()}}(firebaseMessaging)}).call(this,n(0).JL)},function(e,t){window.soclOnsiteSales={},function(e){function r(t,e,n){t.featureSettings.pluginId?soclHelper.hasPushOptInBy(t.id,function(e){s=soclHelper.replaceAll("{PID}",t.featureSettings.pluginId,s),n.setAttribute("src",o+"index.min.html?appId="+t.appId+"&id="+t.id+"&name="+encodeURIComponent(t.name)+"&pluginId="+t.featureSettings.pluginId+"&pluginParameters="+encodeURIComponent(t.featureSettings.pluginParameters)+"&version="+t.featureSettings.version+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(s)+"&hasOptIn="+e+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+t.gaEnabled)}):n.setAttribute("src",o+"index.min.html?appId="+t.appId+"&id="+t.id+"&name="+encodeURIComponent(t.name)+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(s)+"&gaEnabled="+t.gaEnabled),n.setAttribute("id","social-onsite"),n.setAttribute("class","socl-iframe"),n.setAttribute("name","social-onsite"),e.appendChild(n)}function t(e,t){null==g.getAttribute("hasViewedOnSiteInThisPage")&&parseInt(soclHelper.getPosition())>=parseInt(i.scrollPercentage)&&(g.setAttribute("hasViewedOnSiteInThisPage","true"),r(e,g,t))}Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var i,g,n=null,m={Channel_View:"Channel.OnSiteMessage.View",Channel_Conclusion:"Channel.OnSiteMessage.Conclusion",Channel_Rejection:"Channel.OnSiteMessage.Rejection",Channel_Suppression:"Channel.OnSiteMessage.Suppression",Channel_Step_View:"Channel.OnSiteMessage.Step.View",Channel_Step_Conclusion:"Channel.OnSiteMessage.Step.Conclusion",Channel_Step_Rejection:"Channel.OnSiteMessage.Step.Rejection",Channel_ConclusionWithRejection:"Channel.OnSiteMessage.ConclusionWithRejection"},h={Empty:"",OS_Message:"OS.Message",OS_Message_Fab:"OS.Message.Fab",OS_Message_Message:"OS.Message.Message"},s="https://{DNS}.soclminer.com.br/{PID}",o="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/html/onsite-sales/",a="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",c=["d0fc654df5094d32a4b6d9ad8d02cbb4","d13b2682b72e42cc9203ee1f0a20b68d"],l=function(){(n=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-onsite")).addEventListener(u)},u=function(e){if(null!==(g=document.getElementById("sm-onsite-sales"))){if(void 0!==e.data.show){var t=(p=e.data.show.split("|"))[0],n=p[1],o=parseInt(p[2]),r=parseInt(p[3]);g.setAttribute("class","socl-"+t);var i=soclHelper.getStoreValue("smcid"),s=soclHelper.getSessionValue("pagesview_"+n),a=parseInt(s)>o,c=soclCookie.getCookie("smClickOnSite_"+n),s=soclCookie.getCookie("smClosedOnSite_"+n),l=parseInt(soclHelper.getStoreValue("onsiteview_"+n));if(!s&&!c&&a&&(!l||0==r||parseInt(l)<r)){var u={ImpactTimes:isNaN(l)?0:l},c={};c.create_date=soclHelper.getNow(),c.path=window.location.pathname;a=appConfig.IsMobile()?"7":"3";if(c.smid=a.concat("-8"),soclHelper.isInSuppressionGroup(i,n)){c.kind="suppression";try{var d={type:m.Channel_Suppression,step:h.OS_Message,channelId:n,additionalData:u};soclHelper.createEvent(d),isNaN(l)?soclHelper.setStoreValue("onsiteview_"+n,"1"):soclHelper.setStoreValue("onsiteview_"+n,JSON.stringify(l+=1)),soclOnsiteSales.closeMessage()}catch(e){console.log(e)}}else{g.style.display="",c.kind="view";try{(d={type:m.Channel_View,step:h.OS_Message,channelId:n,additionalData:u}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}}c=soclHelper.addOrGetEvent(i,"sm_views",c);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(c))}}if(void 0!==e.data.clickToOpen)try{(d={type:m.Channel_Step_Conclusion,step:h.OS_Message_Fab,channelId:e.data.clickToOpen}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}if(void 0!==e.data.open){var p=e.data.open.split("|"),r=parseInt(p[0]),t=p[1],i=p[2],n=p[3],o=parseInt(p[4]);if(g.setAttribute("class","socl-open socl-"+t),!soclCookie.getCookie("smClosedOnSite_"+n)&&!soclCookie.getCookie("smClickOnSite_"+n)&&parseInt(soclHelper.getSessionValue("pagesview_"+n))>o&&(!soclHelper.getStoreValue("onsiteview_"+n)||parseInt(soclHelper.getStoreValue("onsiteview_"+n))<r||0==r)){g.style.display="",soclPerfCounter.event(n,soclPerfCounter.type.View,6,i);r=parseInt(soclHelper.getStoreValue("onsiteview_"+n));isNaN(r)?soclHelper.setStoreValue("onsiteview_"+n,"1"):(r+=1,soclHelper.setStoreValue("onsiteview_"+n,JSON.stringify(r))),soclCookie.createCookie("smViewOnSite",!0,3),socl.emmit.onView({id:n,type:"onsite"});try{(d={type:m.Channel_Step_View,step:h.OS_Message_Message,channelId:n}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}}}if(void 0!==e.data.close){var p=e.data.close.split("|"),f=parseInt(p[0]),n=p[1];0<f&&soclCookie.createCookieOnSite("smClosedOnSite_"+n,!0,f),soclHelper.setStoreValue("onsiteview_"+p.pluginId,"0"),soclCookie.createCookie("smCloseOnSite",!0,3),socl.emmit.onClose({id:p.pluginId,type:"onsite"}),soclOnsiteSales.closeMessage();try{(d={type:m.Channel_Rejection,step:h.OS_Message,channelId:n}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}}if(void 0!==e.data.click){n=(p=e.data.click.split("|"))[0],i=p[1],f=parseInt(p[2]),p=p[3],p=v(new URL(p));soclPerfCounter.event(n,soclPerfCounter.type.Click,6,i),soclHelper.setStoreValue("onsiteview_"+n,"0"),0<f&&soclCookie.createCookieOnSite("smClickOnSite_"+n,!0,f),soclCookie.createCookie("smClickOnSite",!0,3),socl.emmit.onClick({id:n,type:"onsite"});try{(d={type:m.Channel_Conclusion,step:h.OS_Message,channelId:n}).channelId&&soclHelper.createEvent(d)}catch(e){console.log(e)}window.top.location.href=p.toString(),setTimeout(function(){soclOnsiteSales.closeMessage()},1e3)}}},v=function(n){return c.includes(soclHelper.getStoreValue("smcid"))&&new URLSearchParams(window.location.search).forEach(function(e,t){n.searchParams.append(t,e)}),n};e.closeMessage=function(){null!==document.getElementById("sm-onsite-sales")&&document.getElementById("sm-onsite-sales").SoclRemoveTag()},e.render=function(o){navigator.cookieEnabled&&(soclHelper.injectDiv("sm-onsite-sales","none"),null!==(g=document.getElementById("sm-onsite-sales"))&&o.featureSettings.pluginParameters&&function(t){soclHelper.injectCSS(a,"onsite.min.css");try{l(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){var n;e&&(n=soclHelper.createBaseIframe(),i=JSON.parse(o.featureSettings.pluginParameters),s=soclHelper.replaceAll("{DNS}",o.dns,s),0<i.scrollPercentage?(document.addEventListener("scroll",function(){t(o,n)},!1),0<i.timeInSite&&setTimeout(function(){var e,t;e=o,t=n,null==g.getAttribute("hasViewedOnSiteInThisPage")&&(g.setAttribute("hasViewedOnSiteInThisPage","true"),r(e,g,t))},i.timeInSite)):r(o,g,n))}))},e.clearInstance=function(){n&&n.removeEventListener(u),document.removeEventListener("scroll",t),soclHelper.removeElementById("sm-onsite-sales")}}(soclOnsiteSales)},function(e,t){window.soclOnSite={},function(e){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var r="https://{DNS}.soclminer.com.br/{PID}",i="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/channels/html/",s="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/channels/assets/css/",a=function(){new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-onsite").addEventListener(t)},t=function(e){var t,n,o,r,i,s,a=document.getElementById("sm-onsite");null!==a&&(void 0!==e.data.show&&(n=(i=e.data.show.split("|"))[0],s=i[1],a.setAttribute("class","socl-"+n),"true"===s?soclCookie.getCookie("smViewedOnSiteLead")||soclCookie.getCookie("smClosedOnSiteLead")||(a.style.display=""):soclCookie.getCookie("smViewedOnSite")||soclCookie.getCookie("smClosedOnSite")||(a.style.display="")),void 0!==e.data.open&&(t=(i=e.data.open.split("|"))[0],n=i[1],o=i[2],r=i[3],s=i[4],a.setAttribute("class","socl-open socl-"+n),"true"===s?soclCookie.getCookie("smViewedOnSiteLead")||soclCookie.getCookie("smClosedOnSiteLead")||(null!==r&&soclPerfCounter.event(r,soclPerfCounter.type.Impression,4,o),soclCookie.createCookie("smViewedOnSiteLead",!0,t)):soclCookie.getCookie("smViewedOnSite")||soclCookie.getCookie("smClosedOnSite")||soclCookie.createCookie("smViewedOnSite",!0,t)),void 0!==e.data.close&&(e=(i=e.data.close.split("|"))[0],"true"===(s=i[1])?soclCookie.createCookie("smClosedOnSiteLead",!0,e):soclCookie.createCookie("smClosedOnSite",!0,e),soclOnSite.closeMessage()))};e.closeMessage=function(){null!==document.getElementById("sm-onsite")&&document.getElementById("sm-onsite").SoclRemoveTag()},e.render=function(n){var o;navigator.cookieEnabled&&(soclHelper.injectDiv("sm-onsite","none"),null!==(o=document.getElementById("sm-onsite"))&&function(t){soclHelper.injectCSS(s,"onsite.min.css");try{a(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(function(e){var t;e&&(t=soclHelper.createBaseIframe(),r=soclHelper.replaceAll("{DNS}",n.dns,r),n.featureSettings.pluginId?soclHelper.hasPushOptInBy(n.id,function(e){r=soclHelper.replaceAll("{PID}",n.featureSettings.pluginId,r),t.setAttribute("src",i+"index-alfajor.min.html?appId="+n.appId+"&id="+n.id+"&name="+encodeURIComponent(n.name)+"&pluginId="+n.featureSettings.pluginId+"&version="+n.featureSettings.version+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(r)+"&hasOptIn="+e+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+n.gaEnabled),soclHelper.setStoreValue("smpid_4",n.featureSettings.pluginId)}):t.setAttribute("src",i+"index-alfajor.min.html?appId="+n.appId+"&id="+n.id+"&name="+encodeURIComponent(n.name)+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(r)+"&gaEnabled="+n.gaEnabled),t.setAttribute("id","social-onsite"),t.setAttribute("class","socl-iframe"),t.setAttribute("name","social-onsite"),o.appendChild(t))}))}}(soclOnSite)},function(e,t){soclOuibounce=function(e,t){var n=(t=t||{}).aggressive||!1,o=m(t.sensitivity,20),r=m(t.timer,1e3),i=m(t.delay,0),s=t.callback||function(){},a=t.onBeforeShow||function(){},c=t.displayBounce,l=h(t.cookieExpire)||"",u=t.cookieDomain?";domain="+t.cookieDomain:"",d=t.cookieName||"viewedOuibounceModal",p=!0===t.sitewide?";path=/":"",f=null,g=document.documentElement;function m(e,t){return void 0===e?t:e}function h(e){var t=24*e*60*60*1e3,e=new Date;return e.setTime(e.getTime()+t),"; expires="+e.toUTCString()}function v(e){e.clientY>o||w(d,"true")&&!n||!c||(f=setTimeout(C,i))}function S(e){f&&(clearTimeout(f),f=null)}setTimeout(function(){g.addEventListener("mouseleave",v),g.addEventListener("mouseenter",S),g.addEventListener("keydown",y)},r);var I=!1;function y(e){I||w(d,"true")&&!n||e.metaKey&&76===e.keyCode&&(I=!0,f=setTimeout(C,i))}function w(e,t){return function(){for(var e=document.cookie.split("; "),t={},n=e.length-1;0<=n;n--){var o=e[n].split("=");t[o[0]]=o[1]}return t}()[e]===t}function C(){a()||!1||(e&&(e.style.display="block"),b(),s())}function b(e){void 0!==(e=e||{}).cookieExpire&&(l=h(e.cookieExpire)),!0===e.sitewide&&(p=";path=/"),void 0!==e.cookieDomain&&(u=";domain="+e.cookieDomain),void 0!==e.cookieName&&(d=e.cookieName),document.cookie=d+"=true"+l+u+p,g.removeEventListener("mouseleave",v),g.removeEventListener("mouseenter",S),g.removeEventListener("keydown",y)}return{fire:C,disable:b,destroy:function(){g.removeEventListener("mouseleave",v),g.removeEventListener("mouseenter",S),g.removeEventListener("keydown",y)}}}},function(e,t){function a(){l=!1}var c,l,u;window.soclOrganic={},c=soclOrganic,l=!1,u=function(e,t,n,o,r){var i=soclHelper.getStoreValue("smcid");if("connected"!==soclHelper.getStoreValue(i))if(l)0<(r=void 0===r?10:r)&&window.setTimeout(function(){u(e,t,n,o,r--)},1e3);else{l=!0;try{if(void 0===e)return!1;void 0===n&&(n=2),void 0===o&&(o=!1);var s={};s[e]={value:t,weight:n},c.updateUser(s,o)}catch(e){console.log("SM - Error on update organic optin user",e),a()}}},c.updateUser=function(e,t){void 0===t&&(t=!1);var n,o,r,i=soclHelper.getLocalStorageValue("socl_Organic"),s=(n=i=i||{},o=e,r=!1,Object.keys(o).forEach(function(e){(void 0===n[e]||n[e].value!=o[e].value&&n[e].weight<o[e].weight)&&(void 0===n[e]&&(n[e]={}),n[e].value=o[e].value,n[e].weight=o[e].weight,r=!0)}),!!r&&n);s?(soclHelper.setLocalStorageValue("socl_Organic",JSON.stringify(s)),i=soclHelper.getStoreValue("smcid"),e=soclHelper.getStoreValue(soclConnect.createSMIdKey(soclHelper.replaceAll("-","",i))),t?a():e?soclConnect.updateOrganic(s,i,e,a):soclConnect.signInOrganic(s,i,24,a)):a()},c.updateUserEmail=function(e,t,n){u("email",e,t,n)},c.updateUserName=function(e,t,n){e.includes("*")||u("firstName",e,t,n)},c.updateUserPhone=function(e,t,n){var o=(e=(e="string"!=typeof e?String(e):e).replace(/\D/g,"")).match(/(\d{0,2})(\d{0,5})(\d{0,4})/);e=o[2]?"("+o[1]+") "+o[2]+(o[3]?"-"+o[3]:""):o[1],/^(\(\d{2}\)\s)(\d{5}\-\d{4})$/.test(e)&&u("phone",e,t,n)}},function(e,t){function l(e){var i,s,a,c,l,u,d,p,f,g,m;if(null!=e&&16==e.length){i=e[3]<<24|e[2]<<16|e[1]<<8|e[0],s=e[5]<<8|e[4],a=e[7]<<8|e[6],c=e[8],l=e[9],u=e[10],d=e[11],p=e[12],f=e[13],g=e[14],m=e[15],this.b=e;return this.guidString=function(){return function(e){null!=e&&0!=e.length||(e="D");var t=new Array,n=0,o=!0,r=!1;if(1!=e.length)return null;e=e[0];if("D"==e||"d"==e)t=new Array(36),0;else if("N"==e||"n"==e)t=new Array(32),o=!32;else if("B"==e||"b"==e)(t=new Array(38))[n++]="{",t[37]="}";else if("P"==e||"p"==e)(t=new Array(38))[n++]="(",t[37]=")";else{if("X"!=e&&"x"!=e)return null;(t=new Array(68))[n++]="{",t[67]="}",r=!(o=!68)}return r?(t[n++]="0",t[n++]="x",n=v(t,n,i>>24,i>>16),n=v(t,n,i>>8,i),t[n++]=",",t[n++]="0",t[n++]="x",n=v(t,n,s>>8,s),t[n++]=",",t[n++]="0",t[n++]="x",n=v(t,n,a>>8,a),t[n++]=",",t[n++]="{",n=v(t,n,c,l,!0),t[n++]=",",n=v(t,n,u,d,!0),t[n++]=",",n=v(t,n,p,f,!0),t[n++]=",",n=v(t,n,g,m,!0),t[n++]="}"):(n=v(t,n,i>>24,i>>16),n=v(t,n,i>>8,i),o&&(t[n++]="-"),n=v(t,n,s>>8,s),o&&(t[n++]="-"),n=v(t,n,a>>8,a),o&&(t[n++]="-"),n=v(t,n,c,l),o&&(t[n++]="-"),n=v(t,n,u,d),n=v(t,n,p,f),n=v(t,n,g,m)),new String(t)}("D").split(",").join("")},this.guidString()}function h(e){return e&=15,String.fromCharCode(9<e?e-10+97:e+48)}function v(e,t,n,o){return v(e,t,n,o,!1)}function v(e,t,n,o,r){return r&&(e[t++]="0",e[t++]="x"),e[t++]=h(n>>4),e[t++]=h(n),r&&(e[t++]=",",e[t++]="0",e[t++]="x"),e[t++]=h(o>>4),e[t++]=h(o),t}}window.soclBase32={},soclBase32.decode=function(e){if(""===e)return e;var t=e.toUpperCase(),n=new Uint8Array(Math.trunc(5*t.length/8));if(0==n.length)return e;for(var o=0,r=0,i=0,s=0;i<n.length;){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(t[o]);if(a<0)return e;var c=Math.min(5-r,8-s);n[i]=n[i]<<c%256,n[i]|=a>>5-(r+c),8<=(s+=c)&&(i++,s=0),5<=(r+=c)&&(o++,r=0)}return l(n)}}]);